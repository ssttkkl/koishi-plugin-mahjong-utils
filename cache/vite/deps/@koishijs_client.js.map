{
  "version": 3,
  "sources": ["../../../node_modules/supports-color/browser.js", "../../../node_modules/object-inspect/index.js", "../../../node_modules/marked-vue/lib/index.mjs", "../../../node_modules/@koishijs/client/client/data.ts", "../../../node_modules/@koishijs/client/client/components/common/index.ts", "../../../node_modules/@koishijs/client/client/components/index.ts", "../../../node_modules/@koishijs/client/client/components/icons/index.ts", "../../../node_modules/@koishijs/client/client/components/layout/index.ts", "../../../node_modules/@cordisjs/core/src/context.ts", "../../../node_modules/@cordisjs/core/src/events.ts", "../../../node_modules/@cordisjs/core/src/reflect.ts", "../../../node_modules/@cordisjs/core/src/utils.ts", "../../../node_modules/@cordisjs/core/src/registry.ts", "../../../node_modules/@cordisjs/core/src/scope.ts", "../../../node_modules/@cordisjs/core/src/service.ts", "../../../node_modules/reggol/lib/browser.mjs", "../../../node_modules/@cordisjs/logger/src/index.ts", "../../../node_modules/@cordisjs/schema/src/index.ts", "../../../node_modules/@cordisjs/timer/src/index.ts", "../../../node_modules/cordis/src/index.ts", "../../../node_modules/@koishijs/client/client/utils.ts", "../../../node_modules/@koishijs/client/client/plugins/action.ts", "../../../node_modules/@koishijs/client/client/plugins/setting.ts", "../../../node_modules/@koishijs/client/client/plugins/i18n.ts", "../../../node_modules/@koishijs/client/client/plugins/loader.ts", "../../../node_modules/@koishijs/client/client/plugins/router.ts", "../../../node_modules/@koishijs/client/client/plugins/theme.ts", "../../../node_modules/@koishijs/client/client/context.ts", "../../../node_modules/@koishijs/client/client/components/link.ts", "../../../node_modules/@koishijs/client/client/components/slot.ts", "../../../node_modules/@satorijs/protocol/src/index.ts", "../../../node_modules/@koishijs/client/client/index.ts"],
  "sourcesContent": ["/* eslint-env browser */\n'use strict';\n\nfunction getChromeVersion() {\n\tconst matches = /(Chrome|Chromium)\\/(?<chromeVersion>\\d+)\\./.exec(navigator.userAgent);\n\n\tif (!matches) {\n\t\treturn;\n\t}\n\n\treturn Number.parseInt(matches.groups.chromeVersion, 10);\n}\n\nconst colorSupport = getChromeVersion() >= 69 ? {\n\tlevel: 1,\n\thasBasic: true,\n\thas256: false,\n\thas16m: false\n} : false;\n\nmodule.exports = {\n\tstdout: colorSupport,\n\tstderr: colorSupport\n};\n", "var hasMap = typeof Map === 'function' && Map.prototype;\nvar mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, 'size') : null;\nvar mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === 'function' ? mapSizeDescriptor.get : null;\nvar mapForEach = hasMap && Map.prototype.forEach;\nvar hasSet = typeof Set === 'function' && Set.prototype;\nvar setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, 'size') : null;\nvar setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === 'function' ? setSizeDescriptor.get : null;\nvar setForEach = hasSet && Set.prototype.forEach;\nvar hasWeakMap = typeof WeakMap === 'function' && WeakMap.prototype;\nvar weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;\nvar hasWeakSet = typeof WeakSet === 'function' && WeakSet.prototype;\nvar weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;\nvar hasWeakRef = typeof WeakRef === 'function' && WeakRef.prototype;\nvar weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;\nvar booleanValueOf = Boolean.prototype.valueOf;\nvar objectToString = Object.prototype.toString;\nvar functionToString = Function.prototype.toString;\nvar $match = String.prototype.match;\nvar $slice = String.prototype.slice;\nvar $replace = String.prototype.replace;\nvar $toUpperCase = String.prototype.toUpperCase;\nvar $toLowerCase = String.prototype.toLowerCase;\nvar $test = RegExp.prototype.test;\nvar $concat = Array.prototype.concat;\nvar $join = Array.prototype.join;\nvar $arrSlice = Array.prototype.slice;\nvar $floor = Math.floor;\nvar bigIntValueOf = typeof BigInt === 'function' ? BigInt.prototype.valueOf : null;\nvar gOPS = Object.getOwnPropertySymbols;\nvar symToString = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? Symbol.prototype.toString : null;\nvar hasShammedSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'object';\n// ie, `has-tostringtag/shams\nvar toStringTag = typeof Symbol === 'function' && Symbol.toStringTag && (typeof Symbol.toStringTag === hasShammedSymbols ? 'object' : 'symbol')\n    ? Symbol.toStringTag\n    : null;\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\nvar gPO = (typeof Reflect === 'function' ? Reflect.getPrototypeOf : Object.getPrototypeOf) || (\n    [].__proto__ === Array.prototype // eslint-disable-line no-proto\n        ? function (O) {\n            return O.__proto__; // eslint-disable-line no-proto\n        }\n        : null\n);\n\nfunction addNumericSeparator(num, str) {\n    if (\n        num === Infinity\n        || num === -Infinity\n        || num !== num\n        || (num && num > -1000 && num < 1000)\n        || $test.call(/e/, str)\n    ) {\n        return str;\n    }\n    var sepRegex = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;\n    if (typeof num === 'number') {\n        var int = num < 0 ? -$floor(-num) : $floor(num); // trunc(num)\n        if (int !== num) {\n            var intStr = String(int);\n            var dec = $slice.call(str, intStr.length + 1);\n            return $replace.call(intStr, sepRegex, '$&_') + '.' + $replace.call($replace.call(dec, /([0-9]{3})/g, '$&_'), /_$/, '');\n        }\n    }\n    return $replace.call(str, sepRegex, '$&_');\n}\n\nvar utilInspect = require('./util.inspect');\nvar inspectCustom = utilInspect.custom;\nvar inspectSymbol = isSymbol(inspectCustom) ? inspectCustom : null;\n\nmodule.exports = function inspect_(obj, options, depth, seen) {\n    var opts = options || {};\n\n    if (has(opts, 'quoteStyle') && (opts.quoteStyle !== 'single' && opts.quoteStyle !== 'double')) {\n        throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');\n    }\n    if (\n        has(opts, 'maxStringLength') && (typeof opts.maxStringLength === 'number'\n            ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity\n            : opts.maxStringLength !== null\n        )\n    ) {\n        throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');\n    }\n    var customInspect = has(opts, 'customInspect') ? opts.customInspect : true;\n    if (typeof customInspect !== 'boolean' && customInspect !== 'symbol') {\n        throw new TypeError('option \"customInspect\", if provided, must be `true`, `false`, or `\\'symbol\\'`');\n    }\n\n    if (\n        has(opts, 'indent')\n        && opts.indent !== null\n        && opts.indent !== '\\t'\n        && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)\n    ) {\n        throw new TypeError('option \"indent\" must be \"\\\\t\", an integer > 0, or `null`');\n    }\n    if (has(opts, 'numericSeparator') && typeof opts.numericSeparator !== 'boolean') {\n        throw new TypeError('option \"numericSeparator\", if provided, must be `true` or `false`');\n    }\n    var numericSeparator = opts.numericSeparator;\n\n    if (typeof obj === 'undefined') {\n        return 'undefined';\n    }\n    if (obj === null) {\n        return 'null';\n    }\n    if (typeof obj === 'boolean') {\n        return obj ? 'true' : 'false';\n    }\n\n    if (typeof obj === 'string') {\n        return inspectString(obj, opts);\n    }\n    if (typeof obj === 'number') {\n        if (obj === 0) {\n            return Infinity / obj > 0 ? '0' : '-0';\n        }\n        var str = String(obj);\n        return numericSeparator ? addNumericSeparator(obj, str) : str;\n    }\n    if (typeof obj === 'bigint') {\n        var bigIntStr = String(obj) + 'n';\n        return numericSeparator ? addNumericSeparator(obj, bigIntStr) : bigIntStr;\n    }\n\n    var maxDepth = typeof opts.depth === 'undefined' ? 5 : opts.depth;\n    if (typeof depth === 'undefined') { depth = 0; }\n    if (depth >= maxDepth && maxDepth > 0 && typeof obj === 'object') {\n        return isArray(obj) ? '[Array]' : '[Object]';\n    }\n\n    var indent = getIndent(opts, depth);\n\n    if (typeof seen === 'undefined') {\n        seen = [];\n    } else if (indexOf(seen, obj) >= 0) {\n        return '[Circular]';\n    }\n\n    function inspect(value, from, noIndent) {\n        if (from) {\n            seen = $arrSlice.call(seen);\n            seen.push(from);\n        }\n        if (noIndent) {\n            var newOpts = {\n                depth: opts.depth\n            };\n            if (has(opts, 'quoteStyle')) {\n                newOpts.quoteStyle = opts.quoteStyle;\n            }\n            return inspect_(value, newOpts, depth + 1, seen);\n        }\n        return inspect_(value, opts, depth + 1, seen);\n    }\n\n    if (typeof obj === 'function' && !isRegExp(obj)) { // in older engines, regexes are callable\n        var name = nameOf(obj);\n        var keys = arrObjKeys(obj, inspect);\n        return '[Function' + (name ? ': ' + name : ' (anonymous)') + ']' + (keys.length > 0 ? ' { ' + $join.call(keys, ', ') + ' }' : '');\n    }\n    if (isSymbol(obj)) {\n        var symString = hasShammedSymbols ? $replace.call(String(obj), /^(Symbol\\(.*\\))_[^)]*$/, '$1') : symToString.call(obj);\n        return typeof obj === 'object' && !hasShammedSymbols ? markBoxed(symString) : symString;\n    }\n    if (isElement(obj)) {\n        var s = '<' + $toLowerCase.call(String(obj.nodeName));\n        var attrs = obj.attributes || [];\n        for (var i = 0; i < attrs.length; i++) {\n            s += ' ' + attrs[i].name + '=' + wrapQuotes(quote(attrs[i].value), 'double', opts);\n        }\n        s += '>';\n        if (obj.childNodes && obj.childNodes.length) { s += '...'; }\n        s += '</' + $toLowerCase.call(String(obj.nodeName)) + '>';\n        return s;\n    }\n    if (isArray(obj)) {\n        if (obj.length === 0) { return '[]'; }\n        var xs = arrObjKeys(obj, inspect);\n        if (indent && !singleLineValues(xs)) {\n            return '[' + indentedJoin(xs, indent) + ']';\n        }\n        return '[ ' + $join.call(xs, ', ') + ' ]';\n    }\n    if (isError(obj)) {\n        var parts = arrObjKeys(obj, inspect);\n        if (!('cause' in Error.prototype) && 'cause' in obj && !isEnumerable.call(obj, 'cause')) {\n            return '{ [' + String(obj) + '] ' + $join.call($concat.call('[cause]: ' + inspect(obj.cause), parts), ', ') + ' }';\n        }\n        if (parts.length === 0) { return '[' + String(obj) + ']'; }\n        return '{ [' + String(obj) + '] ' + $join.call(parts, ', ') + ' }';\n    }\n    if (typeof obj === 'object' && customInspect) {\n        if (inspectSymbol && typeof obj[inspectSymbol] === 'function' && utilInspect) {\n            return utilInspect(obj, { depth: maxDepth - depth });\n        } else if (customInspect !== 'symbol' && typeof obj.inspect === 'function') {\n            return obj.inspect();\n        }\n    }\n    if (isMap(obj)) {\n        var mapParts = [];\n        if (mapForEach) {\n            mapForEach.call(obj, function (value, key) {\n                mapParts.push(inspect(key, obj, true) + ' => ' + inspect(value, obj));\n            });\n        }\n        return collectionOf('Map', mapSize.call(obj), mapParts, indent);\n    }\n    if (isSet(obj)) {\n        var setParts = [];\n        if (setForEach) {\n            setForEach.call(obj, function (value) {\n                setParts.push(inspect(value, obj));\n            });\n        }\n        return collectionOf('Set', setSize.call(obj), setParts, indent);\n    }\n    if (isWeakMap(obj)) {\n        return weakCollectionOf('WeakMap');\n    }\n    if (isWeakSet(obj)) {\n        return weakCollectionOf('WeakSet');\n    }\n    if (isWeakRef(obj)) {\n        return weakCollectionOf('WeakRef');\n    }\n    if (isNumber(obj)) {\n        return markBoxed(inspect(Number(obj)));\n    }\n    if (isBigInt(obj)) {\n        return markBoxed(inspect(bigIntValueOf.call(obj)));\n    }\n    if (isBoolean(obj)) {\n        return markBoxed(booleanValueOf.call(obj));\n    }\n    if (isString(obj)) {\n        return markBoxed(inspect(String(obj)));\n    }\n    // note: in IE 8, sometimes `global !== window` but both are the prototypes of each other\n    /* eslint-env browser */\n    if (typeof window !== 'undefined' && obj === window) {\n        return '{ [object Window] }';\n    }\n    if (\n        (typeof globalThis !== 'undefined' && obj === globalThis)\n        || (typeof global !== 'undefined' && obj === global)\n    ) {\n        return '{ [object globalThis] }';\n    }\n    if (!isDate(obj) && !isRegExp(obj)) {\n        var ys = arrObjKeys(obj, inspect);\n        var isPlainObject = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;\n        var protoTag = obj instanceof Object ? '' : 'null prototype';\n        var stringTag = !isPlainObject && toStringTag && Object(obj) === obj && toStringTag in obj ? $slice.call(toStr(obj), 8, -1) : protoTag ? 'Object' : '';\n        var constructorTag = isPlainObject || typeof obj.constructor !== 'function' ? '' : obj.constructor.name ? obj.constructor.name + ' ' : '';\n        var tag = constructorTag + (stringTag || protoTag ? '[' + $join.call($concat.call([], stringTag || [], protoTag || []), ': ') + '] ' : '');\n        if (ys.length === 0) { return tag + '{}'; }\n        if (indent) {\n            return tag + '{' + indentedJoin(ys, indent) + '}';\n        }\n        return tag + '{ ' + $join.call(ys, ', ') + ' }';\n    }\n    return String(obj);\n};\n\nfunction wrapQuotes(s, defaultStyle, opts) {\n    var quoteChar = (opts.quoteStyle || defaultStyle) === 'double' ? '\"' : \"'\";\n    return quoteChar + s + quoteChar;\n}\n\nfunction quote(s) {\n    return $replace.call(String(s), /\"/g, '&quot;');\n}\n\nfunction isArray(obj) { return toStr(obj) === '[object Array]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isDate(obj) { return toStr(obj) === '[object Date]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isRegExp(obj) { return toStr(obj) === '[object RegExp]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isError(obj) { return toStr(obj) === '[object Error]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isString(obj) { return toStr(obj) === '[object String]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isNumber(obj) { return toStr(obj) === '[object Number]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isBoolean(obj) { return toStr(obj) === '[object Boolean]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\n\n// Symbol and BigInt do have Symbol.toStringTag by spec, so that can't be used to eliminate false positives\nfunction isSymbol(obj) {\n    if (hasShammedSymbols) {\n        return obj && typeof obj === 'object' && obj instanceof Symbol;\n    }\n    if (typeof obj === 'symbol') {\n        return true;\n    }\n    if (!obj || typeof obj !== 'object' || !symToString) {\n        return false;\n    }\n    try {\n        symToString.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isBigInt(obj) {\n    if (!obj || typeof obj !== 'object' || !bigIntValueOf) {\n        return false;\n    }\n    try {\n        bigIntValueOf.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty || function (key) { return key in this; };\nfunction has(obj, key) {\n    return hasOwn.call(obj, key);\n}\n\nfunction toStr(obj) {\n    return objectToString.call(obj);\n}\n\nfunction nameOf(f) {\n    if (f.name) { return f.name; }\n    var m = $match.call(functionToString.call(f), /^function\\s*([\\w$]+)/);\n    if (m) { return m[1]; }\n    return null;\n}\n\nfunction indexOf(xs, x) {\n    if (xs.indexOf) { return xs.indexOf(x); }\n    for (var i = 0, l = xs.length; i < l; i++) {\n        if (xs[i] === x) { return i; }\n    }\n    return -1;\n}\n\nfunction isMap(x) {\n    if (!mapSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        mapSize.call(x);\n        try {\n            setSize.call(x);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof Map; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakMap(x) {\n    if (!weakMapHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakMapHas.call(x, weakMapHas);\n        try {\n            weakSetHas.call(x, weakSetHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakMap; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakRef(x) {\n    if (!weakRefDeref || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakRefDeref.call(x);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isSet(x) {\n    if (!setSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        setSize.call(x);\n        try {\n            mapSize.call(x);\n        } catch (m) {\n            return true;\n        }\n        return x instanceof Set; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakSet(x) {\n    if (!weakSetHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakSetHas.call(x, weakSetHas);\n        try {\n            weakMapHas.call(x, weakMapHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakSet; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isElement(x) {\n    if (!x || typeof x !== 'object') { return false; }\n    if (typeof HTMLElement !== 'undefined' && x instanceof HTMLElement) {\n        return true;\n    }\n    return typeof x.nodeName === 'string' && typeof x.getAttribute === 'function';\n}\n\nfunction inspectString(str, opts) {\n    if (str.length > opts.maxStringLength) {\n        var remaining = str.length - opts.maxStringLength;\n        var trailer = '... ' + remaining + ' more character' + (remaining > 1 ? 's' : '');\n        return inspectString($slice.call(str, 0, opts.maxStringLength), opts) + trailer;\n    }\n    // eslint-disable-next-line no-control-regex\n    var s = $replace.call($replace.call(str, /(['\\\\])/g, '\\\\$1'), /[\\x00-\\x1f]/g, lowbyte);\n    return wrapQuotes(s, 'single', opts);\n}\n\nfunction lowbyte(c) {\n    var n = c.charCodeAt(0);\n    var x = {\n        8: 'b',\n        9: 't',\n        10: 'n',\n        12: 'f',\n        13: 'r'\n    }[n];\n    if (x) { return '\\\\' + x; }\n    return '\\\\x' + (n < 0x10 ? '0' : '') + $toUpperCase.call(n.toString(16));\n}\n\nfunction markBoxed(str) {\n    return 'Object(' + str + ')';\n}\n\nfunction weakCollectionOf(type) {\n    return type + ' { ? }';\n}\n\nfunction collectionOf(type, size, entries, indent) {\n    var joinedEntries = indent ? indentedJoin(entries, indent) : $join.call(entries, ', ');\n    return type + ' (' + size + ') {' + joinedEntries + '}';\n}\n\nfunction singleLineValues(xs) {\n    for (var i = 0; i < xs.length; i++) {\n        if (indexOf(xs[i], '\\n') >= 0) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction getIndent(opts, depth) {\n    var baseIndent;\n    if (opts.indent === '\\t') {\n        baseIndent = '\\t';\n    } else if (typeof opts.indent === 'number' && opts.indent > 0) {\n        baseIndent = $join.call(Array(opts.indent + 1), ' ');\n    } else {\n        return null;\n    }\n    return {\n        base: baseIndent,\n        prev: $join.call(Array(depth + 1), baseIndent)\n    };\n}\n\nfunction indentedJoin(xs, indent) {\n    if (xs.length === 0) { return ''; }\n    var lineJoiner = '\\n' + indent.prev + indent.base;\n    return lineJoiner + $join.call(xs, ',' + lineJoiner) + '\\n' + indent.prev;\n}\n\nfunction arrObjKeys(obj, inspect) {\n    var isArr = isArray(obj);\n    var xs = [];\n    if (isArr) {\n        xs.length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            xs[i] = has(obj, i) ? inspect(obj[i], obj) : '';\n        }\n    }\n    var syms = typeof gOPS === 'function' ? gOPS(obj) : [];\n    var symMap;\n    if (hasShammedSymbols) {\n        symMap = {};\n        for (var k = 0; k < syms.length; k++) {\n            symMap['$' + syms[k]] = syms[k];\n        }\n    }\n\n    for (var key in obj) { // eslint-disable-line no-restricted-syntax\n        if (!has(obj, key)) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (isArr && String(Number(key)) === key && key < obj.length) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (hasShammedSymbols && symMap['$' + key] instanceof Symbol) {\n            // this is to prevent shammed Symbols, which are stored as strings, from being included in the string key section\n            continue; // eslint-disable-line no-restricted-syntax, no-continue\n        } else if ($test.call(/[^\\w$]/, key)) {\n            xs.push(inspect(key, obj) + ': ' + inspect(obj[key], obj));\n        } else {\n            xs.push(key + ': ' + inspect(obj[key], obj));\n        }\n    }\n    if (typeof gOPS === 'function') {\n        for (var j = 0; j < syms.length; j++) {\n            if (isEnumerable.call(obj, syms[j])) {\n                xs.push('[' + inspect(syms[j]) + ']: ' + inspect(obj[syms[j]], obj));\n            }\n        }\n    }\n    return xs;\n}\n", "var __defProp = Object.defineProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\n\n// packages/frontend/marked/src/index.ts\nimport { defineComponent, h } from \"vue\";\nimport { marked } from \"marked\";\nimport * as xss from \"xss\";\nvar allowedTags = [\n  // Content sectioning\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"footer\",\n  \"header\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"hgroup\",\n  \"main\",\n  \"nav\",\n  \"section\",\n  // Text content\n  \"blockquote\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"figcaption\",\n  \"figure\",\n  \"hr\",\n  \"li\",\n  \"main\",\n  \"ol\",\n  \"p\",\n  \"pre\",\n  \"ul\",\n  // Inline text semantics\n  \"a\",\n  \"abbr\",\n  \"b\",\n  \"bdi\",\n  \"bdo\",\n  \"br\",\n  \"cite\",\n  \"code\",\n  \"data\",\n  \"dfn\",\n  \"em\",\n  \"i\",\n  \"kbd\",\n  \"mark\",\n  \"q\",\n  \"rb\",\n  \"rp\",\n  \"rt\",\n  \"rtc\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"small\",\n  \"span\",\n  \"strong\",\n  \"sub\",\n  \"sup\",\n  \"time\",\n  \"u\",\n  \"var\",\n  \"wbr\",\n  // Table content\n  \"caption\",\n  \"col\",\n  \"colgroup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"tr\"\n];\nvar voidTags = [\"img\", \"br\", \"hr\", \"area\", \"base\", \"basefont\", \"input\", \"link\", \"meta\"];\nvar allowedProtocols = [\"http:\", \"https:\", \"mailto:\", \"tel:\"];\nfunction checkUrl(value) {\n  try {\n    const url = new URL(value, location.toString());\n    return allowedProtocols.includes(url.protocol);\n  } catch (e) {\n    return false;\n  }\n}\n__name(checkUrl, \"checkUrl\");\nfunction sanitize(html) {\n  const whiteList = {\n    ...Object.fromEntries(allowedTags.map((tag) => [tag, []]))\n  };\n  const stack = [];\n  html = xss.filterXSS(html, {\n    whiteList,\n    stripIgnoreTag: true,\n    onTag(tag, raw, options) {\n      let html2;\n      if (tag === \"a\" && !options.isClosing) {\n        const attrs = {};\n        xss.parseAttr(raw.slice(3), (name, value) => {\n          if (name === \"href\") {\n            attrs[name] = checkUrl(value) ? value : \"#\";\n          } else if (name === \"title\") {\n            attrs[name] = xss.escapeAttrValue(value);\n          }\n          return \"\";\n        });\n        attrs.rel = \"noopener noreferrer\";\n        attrs.target = \"_blank\";\n        html2 = `<a ${Object.entries(attrs).map(([name, value]) => `${name}=\"${value}\"`).join(\" \")}>`;\n      }\n      if (raw.endsWith(\"/>\") || voidTags.includes(tag))\n        return;\n      if (!options.isClosing) {\n        stack.push(tag);\n        return html2;\n      }\n      let result = \"\";\n      while (stack.length) {\n        const last = stack.pop();\n        if (last === tag) {\n          return result + raw;\n        }\n        result += `</${last}>`;\n      }\n      return raw.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    }\n  });\n  while (stack.length) {\n    const last = stack.pop();\n    html += `</${last}>`;\n  }\n  return html;\n}\n__name(sanitize, \"sanitize\");\nvar src_default = defineComponent({\n  props: {\n    source: String,\n    inline: Boolean,\n    tag: String,\n    unsafe: Boolean\n  },\n  setup(props) {\n    return () => {\n      let html = props.inline ? marked.parseInline(props.source || \"\") : marked.parse(props.source || \"\");\n      if (!props.unsafe)\n        html = sanitize(html);\n      const tag = props.tag || (props.inline ? \"span\" : \"div\");\n      return h(tag, {\n        class: \"markdown\",\n        innerHTML: html\n      });\n    };\n  }\n});\nexport {\n  src_default as default,\n  sanitize\n};\n", "import type { ClientConfig, Console, DataService, Events } from '@koishijs/plugin-console'\nimport type { Promisify, Universal } from 'koishi'\nimport { markRaw, reactive, ref } from 'vue'\nimport { Context } from './context'\n\nexport type Store = {\n  [K in keyof Console.Services]?: Console.Services[K] extends DataService<infer T> ? T : never\n}\n\ndeclare const KOISHI_CONFIG: ClientConfig\nexport const global = KOISHI_CONFIG\nexport const store = reactive<Store>({})\n\nexport function withProxy(url: string) {\n  return (global.proxyBase || '') + url\n}\n\nexport const socket = ref<Universal.WebSocket>(null)\nconst listeners: Record<string, (data: any) => void> = {}\nconst responseHooks: Record<string, [Function, Function]> = {}\n\nexport function send<T extends keyof Events>(type: T, ...args: Parameters<Events[T]>): Promisify<ReturnType<Events[T]>>\nexport function send(type: string, ...args: any[]) {\n  if (!socket.value) return\n  console.debug('↑%c', 'color:brown', type, args)\n  const id = Math.random().toString(36).slice(2, 9)\n  socket.value.send(JSON.stringify({ id, type, args }))\n  return new Promise((resolve, reject) => {\n    responseHooks[id] = [resolve, reject]\n    setTimeout(() => {\n      delete responseHooks[id]\n      reject(new Error('timeout'))\n    }, 60000)\n  })\n}\n\nexport function receive<T = any>(event: string, listener: (data: T) => void) {\n  listeners[event] = listener\n}\n\nreceive('data', ({ key, value }) => {\n  store[key] = value\n})\n\nreceive('patch', ({ key, value }) => {\n  if (Array.isArray(store[key])) {\n    store[key].push(...value)\n  } else if (store[key]) {\n    Object.assign(store[key], value)\n  }\n})\n\nreceive('response', ({ id, value, error }) => {\n  if (!responseHooks[id]) return\n  const [resolve, reject] = responseHooks[id]\n  delete responseHooks[id]\n  if (error) {\n    reject(error)\n  } else {\n    resolve(value)\n  }\n})\n\nexport function connect(ctx: Context, callback: () => Universal.WebSocket) {\n  const value = callback()\n\n  let sendTimer: number\n  let closeTimer: number\n  const refresh = () => {\n    if (!global.heartbeat) return\n    clearTimeout(sendTimer)\n    clearTimeout(closeTimer)\n    sendTimer = +setTimeout(() => send('ping'), global.heartbeat.interval)\n    closeTimer = +setTimeout(() => value?.close(), global.heartbeat.timeout)\n  }\n\n  const reconnect = () => {\n    socket.value = null\n    for (const key in store) {\n      store[key] = undefined\n    }\n    console.log('[koishi] websocket disconnected, will retry in 1s...')\n    setTimeout(() => {\n      connect(ctx, callback).then(location.reload, () => {\n        console.log('[koishi] websocket disconnected, will retry in 1s...')\n      })\n    }, 1000)\n  }\n\n  value.addEventListener('message', (ev) => {\n    refresh()\n    const data = JSON.parse(ev.data)\n    console.debug('↓%c', 'color:purple', data.type, data.body)\n    if (data.type in listeners) {\n      listeners[data.type](data.body)\n    }\n    ctx.emit(data.type, data.body)\n  })\n\n  value.addEventListener('close', reconnect)\n\n  return new Promise<Universal.WebSocket.Event>((resolve, reject) => {\n    value.addEventListener('open', (event) => {\n      socket.value = markRaw(value)\n      resolve(event)\n    })\n    value.addEventListener('error', reject)\n  })\n}\n", "import { App } from 'vue'\nimport Button from './k-button.vue'\nimport Hint from './k-hint.vue'\nimport Tab from './k-tab.vue'\n\nexport default function (app: App) {\n  app.component('k-button', Button)\n  app.component('k-hint', Hint)\n  app.component('k-tab', Tab)\n}\n", "import { App } from 'vue'\nimport Markdown from 'marked-vue'\nimport components, { SchemaBase } from '@koishijs/components'\nimport Element, { ElLoading, ElMessage, ElMessageBox } from 'element-plus'\n\nimport { store } from '../data'\nimport common from './common'\nimport Dynamic from './dynamic.vue'\nimport Perms from './perms.vue'\nimport ChatImage from './chat/image.vue'\nimport * as icons from './icons'\nimport layout from './layout'\nimport link from './link'\nimport slot from './slot'\n\nimport 'element-plus/dist/index.css'\n\nexport const loading = ElLoading.service\nexport const message = ElMessage\nexport const messageBox = ElMessageBox\n\nexport * from './common'\nexport * from './layout'\nexport * from './link'\nexport * from './slot'\n\nexport * from 'vue-i18n'\nexport * from '@koishijs/components'\n\nexport { icons, ChatImage }\n\nSchemaBase.extensions.add({\n  type: 'any',\n  role: 'dynamic',\n  component: Dynamic,\n})\n\nSchemaBase.extensions.add({\n  type: 'array',\n  role: 'perms',\n  component: Perms,\n  validate: () => !!store.permissions,\n})\n\nexport default function (app: App) {\n  app.use(Element)\n  app.component('k-markdown', Markdown)\n\n  app.use(common)\n  app.use(components)\n  app.use(icons)\n  app.use(layout)\n  app.use(link)\n  app.use(slot)\n}\n", "import { App, Component, defineComponent, h, markRaw, reactive } from 'vue'\nimport * as components from '@koishijs/components'\nimport Default from './activity/default.vue'\nimport Ellipsis from './activity/ellipsis.vue'\nimport Home from './activity/home.vue'\nimport Moon from './activity/moon.vue'\nimport Settings from './activity/settings.vue'\nimport Sun from './activity/sun.vue'\nimport ArrowLeft from './svg/arrow-left.vue'\nimport ArrowRight from './svg/arrow-right.vue'\nimport BoxOpen from './svg/box-open.vue'\nimport CheckFull from './svg/check-full.vue'\nimport ChevronDown from './svg/chevron-down.vue'\nimport ChevronLeft from './svg/chevron-left.vue'\nimport ChevronRight from './svg/chevron-right.vue'\nimport ChevronUp from './svg/chevron-up.vue'\nimport ClipboardList from './svg/clipboard-list.vue'\nimport Edit from './svg/edit.vue'\nimport ExclamationFull from './svg/exclamation-full.vue'\nimport Expand from './svg/expand.vue'\nimport FileArchive from './svg/file-archive.vue'\nimport Filter from './svg/filter.vue'\nimport GitHub from './svg/github.vue'\nimport GitLab from './svg/gitlab.vue'\nimport InfoFull from './svg/info-full.vue'\nimport Koishi from './svg/koishi.vue'\nimport Link from './svg/link.vue'\nimport PaperPlane from './svg/paper-plane.vue'\nimport QuestionEmpty from './svg/question-empty.vue'\nimport Redo from './svg/redo.vue'\nimport Search from './svg/search.vue'\nimport SearchMinus from './svg/search-minus.vue'\nimport SearchPlus from './svg/search-plus.vue'\nimport StarEmpty from './svg/star-empty.vue'\nimport StarFull from './svg/star-full.vue'\nimport Start from './svg/start.vue'\nimport Tag from './svg/tag.vue'\nimport TimesFull from './svg/times-full.vue'\nimport Tools from './svg/tools.vue'\nimport Undo from './svg/undo.vue'\nimport User from './svg/user.vue'\n\nimport './style.scss'\n\nconst registry: Record<string, Component> = reactive({})\n\nregister('activity:default', Default)\nregister('activity:ellipsis', Ellipsis)\nregister('activity:home', Home)\nregister('activity:moon', Moon)\nregister('activity:settings', Settings)\nregister('activity:sun', Sun)\n\nregister('arrow-up', components.IconArrowUp)\nregister('arrow-down', components.IconArrowDown)\nregister('arrow-left', ArrowLeft)\nregister('arrow-right', ArrowRight)\nregister('box-open', BoxOpen)\nregister('check-full', CheckFull)\nregister('chevron-down', ChevronDown)\nregister('chevron-left', ChevronLeft)\nregister('chevron-right', ChevronRight)\nregister('chevron-up', ChevronUp)\nregister('clipboard-list', ClipboardList)\nregister('close', components.IconClose)\nregister('delete', components.IconDelete)\nregister('edit', Edit)\nregister('ellipsis', components.IconEllipsis)\nregister('exclamation-full', ExclamationFull)\nregister('expand', Expand)\nregister('external', components.IconExternal)\nregister('eye-slash', components.IconEyeSlash)\nregister('eye', components.IconEye)\nregister('file-archive', FileArchive)\nregister('filter', Filter)\nregister('github', GitHub)\nregister('gitlab', GitLab)\nregister('info-full', InfoFull)\nregister('koishi', Koishi)\nregister('link', Link)\nregister('paper-plane', PaperPlane)\nregister('add', components.IconAdd)\nregister('question-empty', QuestionEmpty)\nregister('redo', Redo)\nregister('search', Search)\nregister('search-minus', SearchMinus)\nregister('search-plus', SearchPlus)\nregister('star-empty', StarEmpty)\nregister('star-full', StarFull)\nregister('start', Start)\nregister('tag', Tag)\nregister('times-full', TimesFull)\nregister('tools', Tools)\nregister('undo', Undo)\nregister('user', User)\n\nexport function register(name: string, component: Component) {\n  registry[name] = markRaw(component)\n}\n\nexport function install(app: App) {\n  app.component('k-icon', defineComponent({\n    props: {\n      name: String,\n    },\n    render(props) {\n      const component = registry[props.name]\n      return component && h(component)\n    },\n  }))\n}\n", "import { App } from 'vue'\nimport Card from './card.vue'\nimport Content from './content.vue'\nimport Empty from './empty.vue'\nimport TabGroup from './tab-group.vue'\nimport TabItem from './tab-item.vue'\n\nexport default function (app: App) {\n  app.component('k-card', Card)\n  app.component('k-content', Content)\n  app.component('k-empty', Empty)\n  app.component('k-tab-group', TabGroup)\n  app.component('k-tab-item', TabItem)\n}\n", "import { defineProperty, Dict } from 'cosmokit'\nimport Lifecycle from './events.ts'\nimport ReflectService from './reflect.ts'\nimport Registry from './registry.ts'\nimport { getTraceable, resolveConfig, symbols } from './utils.ts'\n\nexport { Lifecycle, ReflectService, Registry }\n\nexport namespace Context {\n  export type Parameterized<C, T = any> = C & { config: T }\n\n  /** @deprecated use `string[]` instead */\n  export interface MixinOptions {\n    methods?: string[]\n    accessors?: string[]\n    prototype?: {}\n  }\n\n  export type Internal = Internal.Service | Internal.Accessor | Internal.Alias\n\n  export namespace Internal {\n    export interface Service {\n      type: 'service'\n      builtin?: boolean\n      prototype?: {}\n    }\n\n    export interface Accessor {\n      type: 'accessor'\n      get: (this: Context, receiver: any) => any\n      set?: (this: Context, value: any, receiver: any) => boolean\n    }\n\n    export interface Alias {\n      type: 'alias'\n      name: string\n    }\n  }\n}\n\n// https://github.com/typescript-eslint/typescript-eslint/issues/6720\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport interface Intercept<C extends Context = Context> {}\n\nexport interface Context {\n  [Context.isolate]: Dict<symbol>\n  [Context.intercept]: Intercept<this>\n  [Context.internal]: Dict<Context.Internal>\n  root: this\n  lifecycle: Lifecycle\n  reflect: ReflectService\n  registry: Registry<this>\n  config: any\n}\n\nexport class Context {\n  static readonly source: unique symbol = symbols.source as any\n  static readonly events: unique symbol = symbols.events as any\n  static readonly static: unique symbol = symbols.static as any\n  static readonly filter: unique symbol = symbols.filter as any\n  static readonly expose: unique symbol = symbols.expose as any\n  static readonly isolate: unique symbol = symbols.isolate as any\n  static readonly internal: unique symbol = symbols.internal as any\n  static readonly intercept: unique symbol = symbols.intercept as any\n  static readonly origin = 'ctx'\n  static readonly current = 'ctx'\n\n  static is<C extends Context>(value: any): value is C {\n    return !!value?.[Context.is as any]\n  }\n\n  static {\n    Context.is[Symbol.toPrimitive] = () => Symbol.for('cordis.is')\n    Context.prototype[Context.is as any] = true\n  }\n\n  /** @deprecated use `Service.traceable` instead */\n  static associate<T extends {}>(object: T, name: string) {\n    return object\n  }\n\n  constructor(config?: any) {\n    config = resolveConfig(this.constructor, config)\n    this[symbols.internal] = Object.create(null)\n    this[symbols.isolate] = Object.create(null)\n    this[symbols.intercept] = Object.create(null)\n    const self: Context = new Proxy(this, ReflectService.handler)\n    self.root = self\n    self.reflect = new ReflectService(self)\n    self.registry = new Registry(self, config)\n    self.lifecycle = new Lifecycle(self)\n\n    const attach = (internal: Context[typeof symbols.internal]) => {\n      if (!internal) return\n      attach(Object.getPrototypeOf(internal))\n      for (const key of Object.getOwnPropertyNames(internal)) {\n        const constructor = internal[key]['prototype']?.constructor\n        if (!constructor) continue\n        self[internal[key]['key']] = new constructor(self, config)\n        defineProperty(self[internal[key]['key']], 'ctx', self)\n      }\n    }\n    attach(this[symbols.internal])\n    return self\n  }\n\n  [Symbol.for('nodejs.util.inspect.custom')]() {\n    return `Context <${this.name}>`\n  }\n\n  get name() {\n    let runtime = this.runtime\n    while (runtime && !runtime.name) {\n      runtime = runtime.parent.runtime\n    }\n    return runtime?.name!\n  }\n\n  get events() {\n    return this.lifecycle\n  }\n\n  /** @deprecated */\n  get state() {\n    return this.scope\n  }\n\n  extend(meta = {}): this {\n    const source = Reflect.getOwnPropertyDescriptor(this, symbols.shadow)?.value\n    const self = Object.assign(Object.create(getTraceable(this, this)), meta)\n    if (!source || Object.hasOwn(meta, symbols.source)) return self\n    return Object.assign(Object.create(self), { [symbols.shadow]: source })\n  }\n\n  isolate(name: string, label?: symbol) {\n    const shadow = Object.create(this[symbols.isolate])\n    shadow[name] = label ?? Symbol(name)\n    return this.extend({ [symbols.isolate]: shadow })\n  }\n\n  intercept<K extends keyof Intercept>(name: K, config: Intercept[K]) {\n    const intercept = Object.create(this[symbols.intercept])\n    intercept[name] = config\n    return this.extend({ [symbols.intercept]: intercept })\n  }\n}\n\nContext.prototype[Context.internal] = Object.create(null)\n", "import { Awaitable, defineProperty, Promisify, remove } from 'cosmokit'\nimport { Context } from './context.ts'\nimport { EffectScope, ForkScope, MainScope, ScopeStatus } from './scope.ts'\nimport { getTraceable, symbols } from './index.ts'\nimport ReflectService from './reflect.ts'\n\nexport function isBailed(value: any) {\n  return value !== null && value !== false && value !== undefined\n}\n\nexport type Parameters<F> = F extends (...args: infer P) => any ? P : never\nexport type ReturnType<F> = F extends (...args: any) => infer R ? R : never\nexport type ThisType<F> = F extends (this: infer T, ...args: any) => any ? T : never\nexport type GetEvents<C extends Context> = C[typeof Context.events]\n\ndeclare module './context.ts' {\n  export interface Context {\n    /* eslint-disable max-len */\n    [Context.events]: Events<this>\n    parallel<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): Promise<void>\n    parallel<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): Promise<void>\n    emit<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): void\n    emit<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): void\n    serial<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): Promisify<ReturnType<GetEvents<this>[K]>>\n    serial<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): Promisify<ReturnType<GetEvents<this>[K]>>\n    bail<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): ReturnType<GetEvents<this>[K]>\n    bail<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): ReturnType<GetEvents<this>[K]>\n    on<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K], options?: boolean | EventOptions): () => boolean\n    once<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K], options?: boolean | EventOptions): () => boolean\n    off<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K]): boolean\n    start(): Promise<void>\n    stop(): Promise<void>\n    /* eslint-enable max-len */\n  }\n}\n\nexport interface EventOptions {\n  prepend?: boolean\n  global?: boolean\n}\n\nexport interface Hook extends EventOptions {\n  ctx: Context\n  callback: (...args: any[]) => any\n}\n\nclass Lifecycle {\n  isActive = false\n  _tasks = new Set<Promise<void>>()\n  _hooks: Record<keyof any, Hook[]> = {}\n\n  constructor(private ctx: Context) {\n    defineProperty(this, symbols.tracker, {\n      associate: 'lifecycle',\n      property: 'ctx',\n    })\n\n    defineProperty(this.on('internal/listener', function (this: Context, name, listener, options: EventOptions) {\n      const method = options.prepend ? 'unshift' : 'push'\n      if (name === 'ready') {\n        if (!this.lifecycle.isActive) return\n        this.scope.ensure(async () => listener())\n        return () => false\n      } else if (name === 'dispose') {\n        this.scope.disposables[method](listener as any)\n        defineProperty(listener, 'name', 'event <dispose>')\n        return () => remove(this.scope.disposables, listener)\n      } else if (name === 'fork') {\n        this.scope.runtime.forkables[method](listener as any)\n        return this.scope.collect('event <fork>', () => remove(this.scope.runtime.forkables, listener))\n      }\n    }), Context.static, ctx.scope)\n\n    for (const level of ['info', 'error', 'warning']) {\n      defineProperty(this.on(`internal/${level}`, (format, ...param) => {\n        if (this._hooks[`internal/${level}`].length > 1) return\n        // eslint-disable-next-line no-console\n        console.info(format, ...param)\n      }), Context.static, ctx.scope)\n    }\n\n    // non-reusable plugin forks are not responsive to isolated service changes\n    defineProperty(this.on('internal/before-service', function (this: Context, name) {\n      for (const runtime of this.registry.values()) {\n        if (!runtime.inject[name]?.required) continue\n        const scopes = runtime.isReusable ? runtime.children : [runtime]\n        for (const scope of scopes) {\n          if (!this[symbols.filter](scope.ctx)) continue\n          scope.updateStatus()\n          scope.reset()\n        }\n      }\n    }, { global: true }), Context.static, ctx.scope)\n\n    defineProperty(this.on('internal/service', function (this: Context, name) {\n      for (const runtime of this.registry.values()) {\n        if (!runtime.inject[name]?.required) continue\n        const scopes = runtime.isReusable ? runtime.children : [runtime]\n        for (const scope of scopes) {\n          if (!this[symbols.filter](scope.ctx)) continue\n          scope.start()\n        }\n      }\n    }, { global: true }), Context.static, ctx.scope)\n\n    // inject in ancestor contexts\n    const checkInject = (scope: EffectScope, name: string) => {\n      if (!scope.runtime.plugin) return false\n      for (const key in scope.runtime.inject) {\n        if (name === ReflectService.resolveInject(scope.ctx, key)[0]) return true\n      }\n      return checkInject(scope.parent.scope, name)\n    }\n\n    defineProperty(this.on('internal/inject', function (this: Context, name) {\n      return checkInject(this.scope, name)\n    }, { global: true }), Context.static, ctx.scope)\n  }\n\n  async flush() {\n    while (this._tasks.size) {\n      await Promise.all(Array.from(this._tasks))\n    }\n  }\n\n  filterHooks(hooks: Hook[], thisArg?: object) {\n    thisArg = getTraceable(this.ctx, thisArg)\n    return hooks.slice().filter((hook) => {\n      const filter = thisArg?.[Context.filter]\n      return hook.global || !filter || filter.call(thisArg, hook.ctx)\n    })\n  }\n\n  * dispatch(type: string, args: any[]) {\n    const thisArg = typeof args[0] === 'object' || typeof args[0] === 'function' ? args.shift() : null\n    const name = args.shift()\n    if (name !== 'internal/event') {\n      this.emit('internal/event', type, name, args, thisArg)\n    }\n    for (const hook of this.filterHooks(this._hooks[name] || [], thisArg)) {\n      yield hook.callback.apply(thisArg, args)\n    }\n  }\n\n  async parallel(...args: any[]) {\n    await Promise.all(this.dispatch('emit', args))\n  }\n\n  emit(...args: any[]) {\n    Array.from(this.dispatch('emit', args))\n  }\n\n  async serial(...args: any[]) {\n    for await (const result of this.dispatch('serial', args)) {\n      if (isBailed(result)) return result\n    }\n  }\n\n  bail(...args: any[]) {\n    for (const result of this.dispatch('bail', args)) {\n      if (isBailed(result)) return result\n    }\n  }\n\n  register(label: string, hooks: Hook[], callback: any, options: EventOptions) {\n    const method = options.prepend ? 'unshift' : 'push'\n    hooks[method]({ ctx: this.ctx, callback, ...options })\n    return this.ctx.state.collect(label, () => this.unregister(hooks, callback))\n  }\n\n  unregister(hooks: Hook[], callback: any) {\n    const index = hooks.findIndex(hook => hook.callback === callback)\n    if (index >= 0) {\n      hooks.splice(index, 1)\n      return true\n    }\n  }\n\n  on(name: string, listener: (...args: any) => any, options?: boolean | EventOptions) {\n    if (typeof options !== 'object') {\n      options = { prepend: options }\n    }\n\n    // handle special events\n    this.ctx.scope.assertActive()\n    listener = this.ctx.reflect.bind(listener)\n    const result = this.bail(this.ctx, 'internal/listener', name, listener, options)\n    if (result) return result\n\n    const hooks = this._hooks[name] ||= []\n    const label = typeof name === 'string' ? `event <${name}>` : 'event (Symbol)'\n    return this.register(label, hooks, listener, options)\n  }\n\n  once(name: string, listener: (...args: any) => any, options?: boolean | EventOptions) {\n    const dispose = this.on(name, function (...args: any[]) {\n      dispose()\n      return listener.apply(this, args)\n    }, options)\n    return dispose\n  }\n\n  async start() {\n    this.isActive = true\n    const hooks = this._hooks.ready || []\n    while (hooks.length) {\n      const { ctx, callback } = hooks.shift()!\n      ctx.scope.ensure(async () => callback())\n    }\n    await this.flush()\n  }\n\n  async stop() {\n    this.isActive = false\n    // `dispose` event is handled by state.disposables\n    this.ctx.scope.reset()\n  }\n}\n\nexport default Lifecycle\n\nexport interface Events<in C extends Context = Context> {\n  'fork'(ctx: C, config: C['config']): void\n  'ready'(): Awaitable<void>\n  'dispose'(): Awaitable<void>\n  'internal/fork'(fork: ForkScope<C>): void\n  'internal/runtime'(runtime: MainScope<C>): void\n  'internal/status'(scope: EffectScope<C>, oldValue: ScopeStatus): void\n  'internal/info'(this: C, format: any, ...param: any[]): void\n  'internal/error'(this: C, format: any, ...param: any[]): void\n  'internal/warning'(this: C, format: any, ...param: any[]): void\n  'internal/before-service'(this: C, name: string, value: any): void\n  'internal/service'(this: C, name: string, value: any): void\n  'internal/before-update'(fork: ForkScope<C>, config: any): void\n  'internal/update'(fork: ForkScope<C>, oldConfig: any): void\n  'internal/inject'(this: C, name: string): boolean | undefined\n  'internal/listener'(this: C, name: string, listener: any, prepend: boolean): void\n  'internal/event'(type: 'emit' | 'parallel' | 'serial' | 'bail', name: string, args: any[], thisArg: any): void\n}\n", "import { defineProperty, Dict, isNullable } from 'cosmokit'\nimport { Context } from './context'\nimport { getTraceable, isObject, isUnproxyable, symbols, withProps } from './utils'\n\ndeclare module './context' {\n  interface Context {\n    get<K extends string & keyof this>(name: K): undefined | this[K]\n    get(name: string): any\n    set<K extends string & keyof this>(name: K, value: undefined | this[K]): () => void\n    set(name: string, value: any): () => void\n    /** @deprecated use `ctx.set()` instead */\n    provide(name: string, value?: any, builtin?: boolean): void\n    accessor(name: string, options: Omit<Context.Internal.Accessor, 'type'>): void\n    alias(name: string, aliases: string[]): void\n    mixin<K extends string & keyof this>(name: K, mixins: (keyof this & keyof this[K])[] | Dict<string>): void\n    mixin<T extends {}>(source: T, mixins: (keyof this & keyof T)[] | Dict<string>): void\n  }\n}\n\nclass ReflectService {\n  static resolveInject(ctx: Context, name: string) {\n    let internal = ctx[symbols.internal][name]\n    while (internal?.type === 'alias') {\n      name = internal.name\n      internal = ctx[symbols.internal][name]\n    }\n    return [name, internal] as const\n  }\n\n  static checkInject(ctx: Context, name: string, error: Error) {\n    ctx = ctx[symbols.shadow] ?? ctx\n    // Case 1: built-in services and special properties\n    // - prototype: prototype detection\n    // - then: async function return\n    if (['prototype', 'then', 'registry', 'lifecycle'].includes(name)) return\n    // Case 2: `$` or `_` prefix\n    if (name[0] === '$' || name[0] === '_') return\n    // Case 3: access directly from root\n    if (!ctx.runtime.plugin) return\n    // Case 4: custom inject checks\n    if (ctx.bail(ctx, 'internal/inject', name)) return\n    ctx.emit(ctx, 'internal/warning', error)\n  }\n\n  static handler: ProxyHandler<Context> = {\n    get: (target, prop, ctx: Context) => {\n      if (typeof prop !== 'string') return Reflect.get(target, prop, ctx)\n\n      if (Reflect.has(target, prop)) {\n        return getTraceable(ctx, Reflect.get(target, prop, ctx), true)\n      }\n\n      const [name, internal] = ReflectService.resolveInject(target, prop)\n      // trace caller\n      const error = new Error(`property ${name} is not registered, declare it as \\`inject\\` to suppress this warning`)\n      const lines = error.stack!.split('\\n')\n      lines.splice(1, 1)\n      error.stack = lines.join('\\n')\n      if (!internal) {\n        ReflectService.checkInject(ctx, name, error)\n        return Reflect.get(target, name, ctx)\n      } else if (internal.type === 'accessor') {\n        return internal.get.call(ctx, ctx[symbols.receiver])\n      } else {\n        if (!internal.builtin) ReflectService.checkInject(ctx, name, error)\n        return ctx.reflect.get(name)\n      }\n    },\n\n    set: (target, prop, value, ctx: Context) => {\n      if (typeof prop !== 'string') return Reflect.set(target, prop, value, ctx)\n\n      const [name, internal] = ReflectService.resolveInject(target, prop)\n      if (!internal) {\n        // TODO warning\n        return Reflect.set(target, name, value, ctx)\n      }\n      if (internal.type === 'accessor') {\n        if (!internal.set) return false\n        return internal.set.call(ctx, value, ctx[symbols.receiver])\n      } else {\n        // ctx.emit(ctx, 'internal/warning', new Error(`assigning to service ${name} is not recommended, please use \\`ctx.set()\\` method instead`))\n        ctx.reflect.set(name, value)\n        return true\n      }\n    },\n\n    has: (target, prop) => {\n      if (typeof prop !== 'string') return Reflect.has(target, prop)\n      if (Reflect.has(target, prop)) return true\n      const [, internal] = ReflectService.resolveInject(target, prop)\n      return !!internal\n    },\n  }\n\n  constructor(public ctx: Context) {\n    defineProperty(this, symbols.tracker, {\n      associate: 'reflect',\n      property: 'ctx',\n    })\n\n    this._mixin('reflect', ['get', 'set', 'provide', 'accessor', 'mixin', 'alias'])\n    this._mixin('scope', ['config', 'runtime', 'effect', 'collect', 'accept', 'decline'])\n    this._mixin('registry', ['using', 'inject', 'plugin'])\n    this._mixin('lifecycle', ['on', 'once', 'parallel', 'emit', 'serial', 'bail', 'start', 'stop'])\n  }\n\n  get(name: string) {\n    const internal = this.ctx[symbols.internal][name]\n    if (internal?.type !== 'service') return\n    const value = this.ctx.root[this.ctx[symbols.isolate][name]]\n    return getTraceable(this.ctx, value)\n  }\n\n  set(name: string, value: any) {\n    this.provide(name)\n    const key = this.ctx[symbols.isolate][name]\n    const oldValue = this.ctx.root[key]\n    value ??= undefined\n    let dispose = () => {}\n    if (oldValue === value) return dispose\n\n    // check override\n    if (!isNullable(value) && !isNullable(oldValue)) {\n      throw new Error(`service ${name} has been registered`)\n    }\n    const ctx: Context = this.ctx\n    if (!isNullable(value)) {\n      dispose = ctx.effect(() => () => {\n        ctx.set(name, undefined)\n      })\n    }\n    if (isUnproxyable(value)) {\n      ctx.emit(ctx, 'internal/warning', new Error(`service ${name} is an unproxyable object, which may lead to unexpected behavior`))\n    }\n\n    // setup filter for events\n    const self = Object.create(ctx)\n    self[symbols.filter] = (ctx2: Context) => {\n      return ctx[symbols.isolate][name] === ctx2[symbols.isolate][name]\n    }\n\n    ctx.emit(self, 'internal/before-service', name, value)\n    ctx.root[key] = value\n    if (isObject(value)) {\n      try {\n        // Frozen objects cannot be modified\n        defineProperty(value, symbols.source, ctx)\n      } catch {}\n    }\n    ctx.emit(self, 'internal/service', name, oldValue)\n    return dispose\n  }\n\n  provide(name: string, value?: any, builtin?: boolean) {\n    const internal = this.ctx.root[symbols.internal]\n    if (name in internal) return\n    const key = Symbol(name)\n    internal[name] = { type: 'service', builtin }\n    this.ctx.root[key] = value\n    this.ctx.root[symbols.isolate][name] = key\n    isObject(value) && defineProperty(value, symbols.tracker, {\n      associate: name,\n      property: 'ctx',\n    })\n  }\n\n  _accessor(name: string, options: Omit<Context.Internal.Accessor, 'type'>) {\n    const internal = this.ctx.root[symbols.internal]\n    if (name in internal) return () => {}\n    internal[name] = { type: 'accessor', ...options }\n    return () => delete this.ctx.root[symbols.isolate][name]\n  }\n\n  accessor(name: string, options: Omit<Context.Internal.Accessor, 'type'>, leak = false) {\n    this.ctx.scope.effect(() => {\n      return this._accessor(name, options)\n    })\n  }\n\n  alias(name: string, aliases: string[]) {\n    const internal = this.ctx.root[symbols.internal]\n    if (name in internal) return\n    for (const key of aliases) {\n      internal[key] ||= { type: 'alias', name }\n    }\n  }\n\n  _mixin(source: any, mixins: string[] | Dict<string>) {\n    const entries = Array.isArray(mixins) ? mixins.map(key => [key, key]) : Object.entries(mixins)\n    const getTarget = typeof source === 'string' ? (ctx: Context) => ctx[source] : () => source\n    const disposables = entries.map(([key, value]) => {\n      return this._accessor(value, {\n        get(receiver) {\n          const service = getTarget(this)\n          if (isNullable(service)) return service\n          const mixin = receiver ? withProps(receiver, service) : service\n          const value = Reflect.get(service, key, mixin)\n          if (typeof value !== 'function') return value\n          return value.bind(mixin ?? service)\n        },\n        set(value, receiver) {\n          const service = getTarget(this)\n          const mixin = receiver ? withProps(receiver, service) : service\n          return Reflect.set(service, key, value, mixin)\n        },\n      })\n    })\n    return () => disposables.forEach(dispose => dispose())\n  }\n\n  mixin(source: any, mixins: string[] | Dict<string>) {\n    this.ctx.scope.effect(() => {\n      return this._mixin(source, mixins)\n    })\n  }\n\n  trace<T>(value: T) {\n    return getTraceable(this.ctx, value)\n  }\n\n  bind<T extends Function>(callback: T) {\n    return new Proxy(callback, {\n      apply: (target, thisArg, args) => {\n        return target.apply(this.trace(thisArg), args.map(arg => this.trace(arg)))\n      },\n    })\n  }\n}\n\nexport default ReflectService\n", "import { defineProperty } from 'cosmokit'\nimport type { Context, Service } from './index.ts'\n\nexport interface Tracker {\n  associate?: string\n  property?: string\n}\n\nexport const symbols = {\n  // internal symbols\n  shadow: Symbol.for('cordis.shadow'),\n  receiver: Symbol.for('cordis.receiver'),\n  original: Symbol.for('cordis.original'),\n\n  // context symbols\n  source: Symbol.for('cordis.source') as typeof Context.source,\n  events: Symbol.for('cordis.events') as typeof Context.events,\n  static: Symbol.for('cordis.static') as typeof Context.static,\n  filter: Symbol.for('cordis.filter') as typeof Context.filter,\n  expose: Symbol.for('cordis.expose') as typeof Context.expose,\n  isolate: Symbol.for('cordis.isolate') as typeof Context.isolate,\n  internal: Symbol.for('cordis.internal') as typeof Context.internal,\n  intercept: Symbol.for('cordis.intercept') as typeof Context.intercept,\n\n  // service symbols\n  setup: Symbol.for('cordis.setup') as typeof Service.setup,\n  invoke: Symbol.for('cordis.invoke') as typeof Service.invoke,\n  extend: Symbol.for('cordis.extend') as typeof Service.extend,\n  tracker: Symbol.for('cordis.tracker') as typeof Service.tracker,\n  provide: Symbol.for('cordis.provide') as typeof Service.provide,\n  immediate: Symbol.for('cordis.immediate') as typeof Service.immediate,\n}\n\nconst GeneratorFunction = function* () {}.constructor\nconst AsyncGeneratorFunction = async function* () {}.constructor\n\nexport function isConstructor(func: any): func is new (...args: any) => any {\n  // async function or arrow function\n  if (!func.prototype) return false\n  // generator function or malformed definition\n  // we cannot use below check because `mock.fn()` is proxified\n  // if (func.prototype.constructor !== func) return false\n  if (func instanceof GeneratorFunction) return false\n  // polyfilled AsyncGeneratorFunction === Function\n  if (AsyncGeneratorFunction !== Function && func instanceof AsyncGeneratorFunction) return false\n  return true\n}\n\nexport function resolveConfig(plugin: any, config: any) {\n  const schema = plugin['Config'] || plugin['schema']\n  if (schema && plugin['schema'] !== false) config = schema(config)\n  return config ?? {}\n}\n\nexport function isUnproxyable(value: any) {\n  return [Map, Set, Date, Promise].some(constructor => value instanceof constructor)\n}\n\nexport function joinPrototype(proto1: {}, proto2: {}) {\n  if (proto1 === Object.prototype) return proto2\n  const result = Object.create(joinPrototype(Object.getPrototypeOf(proto1), proto2))\n  for (const key of Reflect.ownKeys(proto1)) {\n    Object.defineProperty(result, key, Object.getOwnPropertyDescriptor(proto1, key)!)\n  }\n  return result\n}\n\nexport function isObject(value: any): value is {} {\n  return value && (typeof value === 'object' || typeof value === 'function')\n}\n\nexport function getTraceable<T>(ctx: Context, value: T, noTrap?: boolean): T {\n  if (!isObject(value)) return value\n  if (Object.hasOwn(value, symbols.shadow)) {\n    return Object.getPrototypeOf(value)\n  }\n  const tracker = value[symbols.tracker]\n  if (!tracker) return value\n  return createTraceable(ctx, value, tracker, noTrap)\n}\n\nexport function withProps(target: any, props?: {}) {\n  if (!props) return target\n  return new Proxy(target, {\n    get: (target, prop, receiver) => {\n      if (prop in props && prop !== 'constructor') return Reflect.get(props, prop, receiver)\n      return Reflect.get(target, prop, receiver)\n    },\n    set: (target, prop, value, receiver) => {\n      if (prop in props && prop !== 'constructor') return Reflect.set(props, prop, value, receiver)\n      return Reflect.set(target, prop, value, receiver)\n    },\n  })\n}\n\nfunction withProp(target: any, prop: string | symbol, value: any) {\n  return withProps(target, Object.defineProperty(Object.create(null), prop, {\n    value,\n    writable: false,\n  }))\n}\n\nfunction createShadow(ctx: Context, target: any, property: string | undefined, receiver: any) {\n  if (!property) return receiver\n  const origin = Reflect.getOwnPropertyDescriptor(target, property)?.value\n  if (!origin) return receiver\n  return withProp(receiver, property, ctx.extend({ [symbols.shadow]: origin }))\n}\n\nfunction createShadowMethod(ctx: Context, value: any, outer: any, shadow: {}) {\n  return new Proxy(value, {\n    apply: (target, thisArg, args) => {\n      // contravariant\n      if (thisArg === outer) thisArg = shadow\n      // contravariant\n      args = args.map((arg) => {\n        if (typeof arg !== 'function' || arg[symbols.original]) return arg\n        return new Proxy(arg, {\n          get: (target, prop, receiver) => {\n            if (prop === symbols.original) return target\n            const value = Reflect.get(target, prop, receiver)\n            // https://github.com/cordiverse/cordis/issues/14\n            if (prop === 'toString' && value === Function.prototype.toString) {\n              return function (...args: any[]) {\n                return Reflect.apply(value, this === receiver ? target : this, args)\n              }\n            }\n            return value\n          },\n          apply: (target: Function, thisArg, args) => {\n            // covariant\n            return Reflect.apply(target, getTraceable(ctx, thisArg), args.map(arg => getTraceable(ctx, arg)))\n          },\n          construct: (target: Function, args, newTarget) => {\n            // covariant\n            return Reflect.construct(target, args.map(arg => getTraceable(ctx, arg)), newTarget)\n          },\n        })\n      })\n      // covariant\n      return getTraceable(ctx, Reflect.apply(target, thisArg, args))\n    },\n  })\n}\n\nfunction createTraceable(ctx: Context, value: any, tracker: Tracker, noTrap?: boolean) {\n  if (ctx[symbols.shadow]) {\n    ctx = Object.getPrototypeOf(ctx)\n  }\n  const proxy = new Proxy(value, {\n    get: (target, prop, receiver) => {\n      if (prop === symbols.original) return target\n      if (prop === tracker.property) return ctx\n      if (typeof prop === 'symbol') {\n        return Reflect.get(target, prop, receiver)\n      }\n      if (tracker.associate && ctx[symbols.internal][`${tracker.associate}.${prop}`]) {\n        return Reflect.get(ctx, `${tracker.associate}.${prop}`, withProp(ctx, symbols.receiver, receiver))\n      }\n      const shadow = createShadow(ctx, target, tracker.property, receiver)\n      const innerValue = Reflect.get(target, prop, shadow)\n      const innerTracker = innerValue?.[symbols.tracker]\n      if (innerTracker) {\n        return createTraceable(ctx, innerValue, innerTracker)\n      } else if (!noTrap && typeof innerValue === 'function') {\n        return createShadowMethod(ctx, innerValue, receiver, shadow)\n      } else {\n        return innerValue\n      }\n    },\n    set: (target, prop, value, receiver) => {\n      if (prop === symbols.original) return false\n      if (prop === tracker.property) return false\n      if (typeof prop === 'symbol') {\n        return Reflect.set(target, prop, value, receiver)\n      }\n      if (tracker.associate && ctx[symbols.internal][`${tracker.associate}.${prop}`]) {\n        return Reflect.set(ctx, `${tracker.associate}.${prop}`, value, withProp(ctx, symbols.receiver, receiver))\n      }\n      const shadow = createShadow(ctx, target, tracker.property, receiver)\n      return Reflect.set(target, prop, value, shadow)\n    },\n    apply: (target, thisArg, args) => {\n      return applyTraceable(proxy, target, thisArg, args)\n    },\n  })\n  return proxy\n}\n\nfunction applyTraceable(proxy: any, value: any, thisArg: any, args: any[]) {\n  if (!value[symbols.invoke]) return Reflect.apply(value, thisArg, args)\n  return value[symbols.invoke].apply(proxy, args)\n}\n\nexport function createCallable(name: string, proto: {}, tracker: Tracker) {\n  const self = function (...args: any[]) {\n    const proxy = createTraceable(self['ctx'], self, tracker)\n    return applyTraceable(proxy, self, this, args)\n  }\n  defineProperty(self, 'name', name)\n  return Object.setPrototypeOf(self, proto)\n}\n", "import { defineProperty, Dict } from 'cosmokit'\nimport { Context } from './context.ts'\nimport { ForkScope, MainScope } from './scope.ts'\nimport { resolveConfig, symbols } from './utils.ts'\n\nfunction isApplicable(object: Plugin) {\n  return object && typeof object === 'object' && typeof object.apply === 'function'\n}\n\nexport type Inject = string[] | Dict<Inject.Meta>\n\nexport namespace Inject {\n  export interface Meta {\n    required: boolean\n  }\n\n  export function resolve(inject: Inject | null | undefined) {\n    if (!inject) return {}\n    if (Array.isArray(inject)) {\n      return Object.fromEntries(inject.map(name => [name, { required: true }]))\n    }\n    const { required, optional, ...rest } = inject\n    if (Array.isArray(required)) {\n      Object.assign(rest, Object.fromEntries(required.map(name => [name, { required: true }])))\n    }\n    if (Array.isArray(optional)) {\n      Object.assign(rest, Object.fromEntries(optional.map(name => [name, { required: false }])))\n    }\n    return rest\n  }\n}\n\nexport type Plugin<C extends Context = Context, T = any> =\n  | Plugin.Function<C, T>\n  | Plugin.Constructor<C, T>\n  | Plugin.Object<C, T>\n\nexport namespace Plugin {\n  export interface Base<T = any> {\n    name?: string\n    reactive?: boolean\n    reusable?: boolean\n    Config?: (config: any) => T\n    inject?: Inject\n    intercept?: Dict<boolean>\n  }\n\n  export interface Transform<S, T> {\n    schema?: true\n    Config: (config: S) => T\n  }\n\n  export interface Function<C extends Context = Context, T = any> extends Base<T> {\n    (ctx: C, config: T): void\n  }\n\n  export interface Constructor<C extends Context = Context, T = any> extends Base<T> {\n    new (ctx: C, config: T): void\n  }\n\n  export interface Object<C extends Context = Context, T = any> extends Base<T> {\n    apply: (ctx: C, config: T) => void\n  }\n}\n\nexport type Spread<T> = undefined extends T ? [config?: T] : [config: T]\n\ndeclare module './context.ts' {\n  export interface Context {\n    /** @deprecated use `ctx.inject()` instead */\n    using(deps: Inject, callback: Plugin.Function<this, void>): ForkScope<this>\n    inject(deps: Inject, callback: Plugin.Function<this, void>): ForkScope<this>\n    plugin<T = undefined, S = T>(plugin: Plugin.Function<this, T> & Plugin.Transform<S, T>, ...args: Spread<S>): ForkScope<this>\n    plugin<T = undefined, S = T>(plugin: Plugin.Constructor<this, T> & Plugin.Transform<S, T>, ...args: Spread<S>): ForkScope<this>\n    plugin<T = undefined, S = T>(plugin: Plugin.Object<this, T> & Plugin.Transform<S, T>, ...args: Spread<S>): ForkScope<this>\n    plugin<T = undefined>(plugin: Plugin.Function<this, T>, ...args: Spread<T>): ForkScope<this>\n    plugin<T = undefined>(plugin: Plugin.Constructor<this, T>, ...args: Spread<T>): ForkScope<this>\n    plugin<T = undefined>(plugin: Plugin.Object<this, T>, ...args: Spread<T>): ForkScope<this>\n  }\n}\n\nclass Registry<C extends Context = Context> {\n  private _counter = 0\n  private _internal = new Map<Function, MainScope<C>>()\n  protected context: Context\n\n  constructor(public ctx: C, config: any) {\n    defineProperty(this, symbols.tracker, {\n      associate: 'registry',\n      property: 'ctx',\n    })\n\n    this.context = ctx\n    const runtime = new MainScope(ctx, null!, config)\n    ctx.scope = runtime\n    runtime.ctx = ctx\n    this.set(null!, runtime)\n  }\n\n  get counter() {\n    return ++this._counter\n  }\n\n  get size() {\n    return this._internal.size\n  }\n\n  resolve(plugin: Plugin, assert = false): Function | undefined {\n    // Allow `null` as a special case.\n    if (plugin === null) return plugin\n    if (typeof plugin === 'function') return plugin\n    if (isApplicable(plugin)) return plugin.apply\n    if (assert) throw new Error('invalid plugin, expect function or object with an \"apply\" method, received ' + typeof plugin)\n  }\n\n  get(plugin: Plugin) {\n    const key = this.resolve(plugin)\n    return key && this._internal.get(key)\n  }\n\n  has(plugin: Plugin) {\n    const key = this.resolve(plugin)\n    return !!key && this._internal.has(key)\n  }\n\n  set(plugin: Plugin, state: MainScope<C>) {\n    const key = this.resolve(plugin)\n    this._internal.set(key!, state)\n  }\n\n  delete(plugin: Plugin) {\n    const key = this.resolve(plugin)\n    const runtime = key && this._internal.get(key)\n    if (!runtime) return\n    this._internal.delete(key)\n    runtime.dispose()\n    return runtime\n  }\n\n  keys() {\n    return this._internal.keys()\n  }\n\n  values() {\n    return this._internal.values()\n  }\n\n  entries() {\n    return this._internal.entries()\n  }\n\n  forEach(callback: (value: MainScope<C>, key: Function, map: Map<Plugin, MainScope<C>>) => void) {\n    return this._internal.forEach(callback)\n  }\n\n  using(inject: Inject, callback: Plugin.Function<C, void>) {\n    return this.inject(inject, callback)\n  }\n\n  inject(inject: Inject, callback: Plugin.Function<C, void>) {\n    return this.plugin({ inject, apply: callback, name: callback.name })\n  }\n\n  plugin(plugin: Plugin<C>, config?: any, error?: any) {\n    // check if it's a valid plugin\n    this.resolve(plugin, true)\n    this.ctx.scope.assertActive()\n\n    // resolve plugin config\n    if (!error) {\n      try {\n        config = resolveConfig(plugin, config)\n      } catch (reason) {\n        this.context.emit(this.ctx, 'internal/error', reason)\n        error = reason\n        config = null\n      }\n    }\n\n    // check duplication\n    let runtime = this.get(plugin)\n    if (runtime) {\n      if (!runtime.isForkable) {\n        this.context.emit(this.ctx, 'internal/warning', new Error(`duplicate plugin detected: ${plugin.name}`))\n      }\n      return runtime.fork(this.ctx, config, error)\n    }\n\n    runtime = new MainScope(this.ctx, plugin, config, error)\n    this.set(plugin, runtime)\n    return runtime.fork(this.ctx, config, error)\n  }\n}\n\nexport default Registry\n", "import { deepEqual, defineProperty, Dict, isNullable, remove } from 'cosmokit'\nimport { Context } from './context.ts'\nimport { Inject, Plugin } from './registry.ts'\nimport { isConstructor, resolveConfig } from './utils.ts'\n\ndeclare module './context.ts' {\n  export interface Context {\n    scope: EffectScope<this>\n    runtime: MainScope<this>\n    effect<T extends DisposableLike>(callback: Callable<T, [ctx: this]>): T\n    effect<T extends DisposableLike, R>(callback: Callable<T, [ctx: this, config: R]>, config: R): T\n    /** @deprecated use `ctx.effect()` instead */\n    collect(label: string, callback: () => void): () => void\n    accept(callback?: (config: this['config']) => void | boolean, options?: AcceptOptions): () => boolean\n    accept(keys: (keyof this['config'])[], callback?: (config: this['config']) => void | boolean, options?: AcceptOptions): () => boolean\n    decline(keys: (keyof this['config'])[]): () => boolean\n  }\n}\n\nexport type Disposable = () => void\n\nexport type DisposableLike = Disposable | { dispose: Disposable }\n\nexport type Callable<T, R extends unknown[]> = ((...args: R) => T) | (new (...args: R) => T)\n\nexport interface AcceptOptions {\n  passive?: boolean\n  immediate?: boolean\n}\n\nexport interface Acceptor extends AcceptOptions {\n  keys?: string[]\n  callback?: (config: any) => void | boolean\n}\n\nexport const enum ScopeStatus {\n  PENDING,\n  LOADING,\n  ACTIVE,\n  FAILED,\n  DISPOSED,\n}\n\nexport class CordisError extends Error {\n  constructor(public code: CordisError.Code, message?: string) {\n    super(message ?? CordisError.Code[code])\n  }\n}\n\nexport namespace CordisError {\n  export type Code = keyof typeof Code\n\n  export const Code = {\n    INACTIVE_EFFECT: 'cannot create effect on inactive context',\n  } as const\n}\n\nexport abstract class EffectScope<C extends Context = Context> {\n  public uid: number | null\n  public ctx: C\n  public disposables: Disposable[] = []\n  public error: any\n  public status = ScopeStatus.PENDING\n  public isActive = false\n\n  // Same as `this.ctx`, but with a more specific type.\n  protected context: Context\n  protected proxy: any\n  protected acceptors: Acceptor[] = []\n  protected tasks = new Set<Promise<void>>()\n  protected hasError = false\n\n  abstract runtime: MainScope<C>\n  abstract dispose(): boolean\n  abstract update(config: C['config'], forced?: boolean): void\n\n  constructor(public parent: C, public config: C['config']) {\n    this.uid = parent.registry ? parent.registry.counter : 0\n    this.ctx = this.context = parent.extend({ scope: this })\n    this.proxy = new Proxy({}, {\n      get: (target, key) => Reflect.get(this.config, key),\n    })\n  }\n\n  protected get _config() {\n    return this.runtime.isReactive ? this.proxy : this.config\n  }\n\n  assertActive() {\n    if (this.uid !== null || this.isActive) return\n    throw new CordisError('INACTIVE_EFFECT')\n  }\n\n  effect(callback: Callable<DisposableLike, [ctx: C, config: any]>, config?: any) {\n    this.assertActive()\n    const result = isConstructor(callback)\n      // eslint-disable-next-line new-cap\n      ? new callback(this.ctx, config)\n      : callback(this.ctx, config)\n    let disposed = false\n    const original = typeof result === 'function' ? result : result.dispose.bind(result)\n    const wrapped = (...args: []) => {\n      // make sure the original callback is not called twice\n      if (disposed) return\n      disposed = true\n      remove(this.disposables, wrapped)\n      return original(...args)\n    }\n    this.disposables.push(wrapped)\n    if (typeof result === 'function') return wrapped\n    result.dispose = wrapped\n    return result\n  }\n\n  collect(label: string, callback: () => any) {\n    const dispose = defineProperty(() => {\n      remove(this.disposables, dispose)\n      return callback()\n    }, 'name', label)\n    this.disposables.push(dispose)\n    return dispose\n  }\n\n  restart() {\n    this.reset()\n    this.error = null\n    this.hasError = false\n    this.status = ScopeStatus.PENDING\n    this.start()\n  }\n\n  protected _getStatus() {\n    if (this.uid === null) return ScopeStatus.DISPOSED\n    if (this.hasError) return ScopeStatus.FAILED\n    if (this.tasks.size) return ScopeStatus.LOADING\n    if (this.ready) return ScopeStatus.ACTIVE\n    return ScopeStatus.PENDING\n  }\n\n  updateStatus(callback?: () => void) {\n    const oldValue = this.status\n    callback?.()\n    this.status = this._getStatus()\n    if (oldValue !== this.status) {\n      this.context.emit('internal/status', this, oldValue)\n    }\n  }\n\n  ensure(callback: () => Promise<void>) {\n    const task = callback()\n      .catch((reason) => {\n        this.context.emit(this.ctx, 'internal/error', reason)\n        this.cancel(reason)\n      })\n      .finally(() => {\n        this.updateStatus(() => this.tasks.delete(task))\n        this.context.events._tasks.delete(task)\n      })\n    this.updateStatus(() => this.tasks.add(task))\n    this.context.events._tasks.add(task)\n  }\n\n  cancel(reason?: any) {\n    this.error = reason\n    this.updateStatus(() => this.hasError = true)\n    this.reset()\n  }\n\n  get ready() {\n    return Object.entries(this.runtime.inject).every(([name, inject]) => {\n      return !inject.required || !isNullable(this.ctx.get(name))\n    })\n  }\n\n  reset() {\n    this.isActive = false\n    this.disposables = this.disposables.splice(0).filter((dispose) => {\n      if (this.uid !== null && dispose[Context.static] === this) return true\n      ;(async () => dispose())().catch((reason) => {\n        this.context.emit(this.ctx, 'internal/error', reason)\n      })\n    })\n  }\n\n  protected init(error?: any) {\n    if (!this.config) {\n      this.cancel(error)\n    } else {\n      this.start()\n    }\n  }\n\n  start() {\n    if (!this.ready || this.isActive || this.uid === null) return true\n    this.isActive = true\n    this.updateStatus(() => this.hasError = false)\n  }\n\n  accept(callback?: (config: C['config']) => void | boolean, options?: AcceptOptions): () => boolean\n  accept(keys: string[], callback?: (config: C['config']) => void | boolean, options?: AcceptOptions): () => boolean\n  accept(...args: any[]) {\n    const keys = Array.isArray(args[0]) ? args.shift() : null\n    const acceptor: Acceptor = { keys, callback: args[0], ...args[1] }\n    return this.effect(() => {\n      this.acceptors.push(acceptor)\n      if (acceptor.immediate) acceptor.callback?.(this.config)\n      return () => remove(this.acceptors, acceptor)\n    })\n  }\n\n  decline(keys: string[]) {\n    return this.accept(keys, () => true)\n  }\n\n  checkUpdate(resolved: any, forced?: boolean) {\n    if (forced || !this.config) return [true, true]\n    if (forced === false) return [false, false]\n\n    const modified: Record<string, boolean> = Object.create(null)\n    const checkPropertyUpdate = (key: string) => {\n      const result = modified[key] ??= !deepEqual(this.config[key], resolved[key])\n      hasUpdate ||= result\n      return result\n    }\n\n    const ignored = new Set<string>()\n    let hasUpdate = false, shouldRestart = false\n    let fallback: boolean | null = this.runtime.isReactive || null\n    for (const { keys, callback, passive } of this.acceptors) {\n      if (!keys) {\n        fallback ||= !passive\n      } else if (passive) {\n        keys?.forEach(key => ignored.add(key))\n      } else {\n        let hasUpdate = false\n        for (const key of keys) {\n          hasUpdate ||= checkPropertyUpdate(key)\n        }\n        if (!hasUpdate) continue\n      }\n      const result = callback?.(resolved)\n      if (result) shouldRestart = true\n    }\n\n    for (const key in { ...this.config, ...resolved }) {\n      if (fallback === false) continue\n      if (!(key in modified) && !ignored.has(key)) {\n        const hasUpdate = checkPropertyUpdate(key)\n        if (fallback === null) shouldRestart ||= hasUpdate\n      }\n    }\n    return [hasUpdate, shouldRestart]\n  }\n}\n\nexport class ForkScope<C extends Context = Context> extends EffectScope<C> {\n  dispose: () => boolean\n\n  constructor(parent: Context, public runtime: MainScope<C>, config: C['config'], error?: any) {\n    super(parent as C, config)\n\n    this.dispose = defineProperty(parent.scope.collect(`fork <${parent.runtime.name}>`, () => {\n      this.uid = null\n      this.reset()\n      this.context.emit('internal/fork', this)\n      const result = remove(runtime.disposables, this.dispose)\n      if (remove(runtime.children, this) && !runtime.children.length) {\n        parent.registry.delete(runtime.plugin)\n      }\n      return result\n    }), Context.static, runtime)\n\n    runtime.children.push(this)\n    runtime.disposables.push(this.dispose)\n    this.context.emit('internal/fork', this)\n    this.init(error)\n  }\n\n  start() {\n    if (super.start()) return true\n    for (const fork of this.runtime.forkables) {\n      this.ensure(async () => fork(this.context, this._config))\n    }\n  }\n\n  update(config: any, forced?: boolean) {\n    const oldConfig = this.config\n    const state: EffectScope<C> = this.runtime.isForkable ? this : this.runtime\n    if (state.config !== oldConfig) return\n    let resolved: any\n    try {\n      resolved = resolveConfig(this.runtime.plugin, config)\n    } catch (error) {\n      this.context.emit('internal/error', error)\n      return this.cancel(error)\n    }\n    const [hasUpdate, shouldRestart] = state.checkUpdate(resolved, forced)\n    this.context.emit('internal/before-update', this, config)\n    this.config = resolved\n    state.config = resolved\n    if (hasUpdate) {\n      this.context.emit('internal/update', this, oldConfig)\n    }\n    if (shouldRestart) state.restart()\n  }\n}\n\nexport class MainScope<C extends Context = Context> extends EffectScope<C> {\n  public value: any\n\n  runtime = this\n  schema: any\n  name?: string\n  inject: Dict<Inject.Meta> = Object.create(null)\n  forkables: Function[] = []\n  children: ForkScope<C>[] = []\n  isReusable?: boolean = false\n  isReactive?: boolean = false\n\n  constructor(ctx: C, public plugin: Plugin, config: any, error?: any) {\n    super(ctx, config)\n    if (!plugin) {\n      this.name = 'root'\n      this.isActive = true\n    } else {\n      this.setup()\n      this.init(error)\n    }\n  }\n\n  get isForkable() {\n    return this.forkables.length > 0\n  }\n\n  fork(parent: Context, config: any, error?: any) {\n    return new ForkScope(parent, this, config, error)\n  }\n\n  dispose() {\n    this.uid = null\n    this.reset()\n    this.context.emit('internal/runtime', this)\n    return true\n  }\n\n  private setup() {\n    const { name } = this.plugin\n    if (name && name !== 'apply') this.name = name\n    this.schema = this.plugin['Config'] || this.plugin['schema']\n    this.inject = Inject.resolve(this.plugin['using'] || this.plugin['inject'])\n    this.isReusable = this.plugin['reusable']\n    this.isReactive = this.plugin['reactive']\n    this.context.emit('internal/runtime', this)\n\n    if (this.isReusable) {\n      this.forkables.push(this.apply)\n    }\n  }\n\n  private apply = (context: C, config: any) => {\n    if (typeof this.plugin !== 'function') {\n      return this.plugin.apply(context, config)\n    } else if (isConstructor(this.plugin)) {\n      // eslint-disable-next-line new-cap\n      const instance = new this.plugin(context, config)\n      const name = instance[Context.expose]\n      if (name) {\n        context.set(name, instance)\n      }\n      if (instance['fork']) {\n        this.forkables.push(instance['fork'].bind(instance))\n      }\n      return instance\n    } else {\n      return this.plugin(context, config)\n    }\n  }\n\n  reset() {\n    super.reset()\n    for (const fork of this.children) {\n      fork.reset()\n    }\n  }\n\n  start() {\n    if (super.start()) return true\n    if (!this.isReusable && this.plugin) {\n      this.ensure(async () => this.value = this.apply(this.ctx, this._config))\n    }\n    for (const fork of this.children) {\n      fork.start()\n    }\n  }\n\n  update(config: C['config'], forced?: boolean) {\n    if (this.isForkable) {\n      const warning = new Error(`attempting to update forkable plugin \"${this.plugin.name}\", which may lead to unexpected behavior`)\n      this.context.emit(this.ctx, 'internal/warning', warning)\n    }\n    const oldConfig = this.config\n    let resolved: any\n    try {\n      resolved = resolveConfig(this.runtime.plugin || this.context.constructor, config)\n    } catch (error) {\n      this.context.emit('internal/error', error)\n      return this.cancel(error)\n    }\n    const [hasUpdate, shouldRestart] = this.checkUpdate(resolved, forced)\n    const state = this.children.find(fork => fork.config === oldConfig)\n    this.config = resolved\n    if (state) {\n      this.context.emit('internal/before-update', state, config)\n      state.config = resolved\n      if (hasUpdate) {\n        this.context.emit('internal/update', state, oldConfig)\n      }\n    }\n    if (shouldRestart) this.restart()\n  }\n}\n", "import { Awaitable, defineProperty } from 'cosmokit'\nimport { Context } from './context.ts'\nimport { createCallable, joinPrototype, symbols, Tracker } from './utils.ts'\nimport { Spread } from './registry.ts'\n\nexport abstract class Service<T = unknown, C extends Context = Context> {\n  static readonly setup: unique symbol = symbols.setup as any\n  static readonly invoke: unique symbol = symbols.invoke as any\n  static readonly extend: unique symbol = symbols.extend as any\n  static readonly tracker: unique symbol = symbols.tracker as any\n  static readonly provide: unique symbol = symbols.provide as any\n  static readonly immediate: unique symbol = symbols.immediate as any\n\n  protected start(): Awaitable<void> {}\n  protected stop(): Awaitable<void> {}\n  protected fork?(ctx: C, config: any): void\n\n  protected ctx!: C\n\n  public name!: string\n  public config!: T\n\n  constructor(...args: Spread<T>)\n  constructor(ctx: C, ...args: Spread<T>)\n  constructor(ctx: C, name: string, immediate?: boolean)\n  constructor(...args: any[]) {\n    let _ctx: C | undefined, name: string | undefined, immediate: boolean | undefined, config: any\n    if (Context.is<C>(args[0])) {\n      _ctx = args[0]\n      if (typeof args[1] === 'string') {\n        name = args[1]\n        immediate = args[2]\n      } else {\n        config = args[1]\n      }\n    } else {\n      config = args[0]\n    }\n    name ??= this.constructor[symbols.provide] as string\n    immediate ??= this.constructor[symbols.immediate]\n\n    let self = this\n    const tracker: Tracker = {\n      associate: name,\n      property: 'ctx',\n    }\n    if (self[symbols.invoke]) {\n      self = createCallable(name, joinPrototype(Object.getPrototypeOf(this), Function.prototype), tracker)\n    }\n    if (_ctx) {\n      self.ctx = _ctx\n    } else {\n      self[symbols.setup]()\n    }\n    self.name = name\n    self.config = config\n    defineProperty(self, symbols.tracker, tracker)\n\n    self.ctx.provide(name)\n    self.ctx.runtime.name = name\n    if (immediate) {\n      if (_ctx) self[symbols.expose] = name\n      else self.ctx.set(name, self)\n    }\n\n    self.ctx.on('ready', async () => {\n      // await until next tick because derived class has not been initialized yet\n      await Promise.resolve()\n      await self.start()\n      if (!immediate) self.ctx.set(name!, self)\n    })\n\n    self.ctx.on('dispose', () => self.stop())\n    return self\n  }\n\n  protected [symbols.filter](ctx: Context) {\n    return ctx[symbols.isolate][this.name] === this.ctx[symbols.isolate][this.name]\n  }\n\n  protected [symbols.setup]() {\n    this.ctx = new Context() as C\n  }\n\n  protected [symbols.extend](props?: any) {\n    let self: any\n    if (this[Service.invoke]) {\n      self = createCallable(this.name, this, this[symbols.tracker])\n    } else {\n      self = Object.create(this)\n    }\n    return Object.assign(self, props)\n  }\n\n  static [Symbol.hasInstance](instance: any) {\n    let constructor = instance.constructor\n    while (constructor) {\n      // constructor may be a proxy\n      constructor = constructor.prototype?.constructor\n      if (constructor === this) return true\n      constructor = Object.getPrototypeOf(constructor)\n    }\n    return false\n  }\n}\n", "var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\n\n// src/shared.ts\nimport { stdout } from \"supports-color\";\nimport { Time } from \"cosmokit\";\nvar require_shared = __commonJS({\n  \"src/shared.ts\"(exports, module) {\n    \"use strict\";\n    var c16 = [6, 2, 3, 4, 5, 1];\n    var c256 = [\n      20,\n      21,\n      26,\n      27,\n      32,\n      33,\n      38,\n      39,\n      40,\n      41,\n      42,\n      43,\n      44,\n      45,\n      56,\n      57,\n      62,\n      63,\n      68,\n      69,\n      74,\n      75,\n      76,\n      77,\n      78,\n      79,\n      80,\n      81,\n      92,\n      93,\n      98,\n      99,\n      112,\n      113,\n      129,\n      134,\n      135,\n      148,\n      149,\n      160,\n      161,\n      162,\n      163,\n      164,\n      165,\n      166,\n      167,\n      168,\n      169,\n      170,\n      171,\n      172,\n      173,\n      178,\n      179,\n      184,\n      185,\n      196,\n      197,\n      198,\n      199,\n      200,\n      201,\n      202,\n      203,\n      204,\n      205,\n      206,\n      207,\n      208,\n      209,\n      214,\n      215,\n      220,\n      221\n    ];\n    function isAggregateError(error) {\n      return error instanceof Error && Array.isArray(error[\"errors\"]);\n    }\n    __name(isAggregateError, \"isAggregateError\");\n    var Logger = class _Logger {\n      constructor(name, meta) {\n        this.name = name;\n        this.meta = meta;\n        this.createMethod(\"success\", _Logger.SUCCESS);\n        this.createMethod(\"error\", _Logger.ERROR);\n        this.createMethod(\"info\", _Logger.INFO);\n        this.createMethod(\"warn\", _Logger.WARN);\n        this.createMethod(\"debug\", _Logger.DEBUG);\n      }\n      static {\n        __name(this, \"Logger\");\n      }\n      // log levels\n      static SILENT = 0;\n      static SUCCESS = 1;\n      static ERROR = 1;\n      static INFO = 2;\n      static WARN = 2;\n      static DEBUG = 3;\n      // global config\n      static id = 0;\n      static targets = [{\n        colors: stdout && stdout.level,\n        print(text) {\n          console.log(text);\n        }\n      }];\n      // global registry\n      static formatters = /* @__PURE__ */ Object.create(null);\n      static format(name, formatter) {\n        this.formatters[name] = formatter;\n      }\n      static levels = {\n        base: 2\n      };\n      static color(target, code, value, decoration = \"\") {\n        if (!target.colors)\n          return \"\" + value;\n        return `\\x1B[3${code < 8 ? code : \"8;5;\" + code}${target.colors >= 2 ? decoration : \"\"}m${value}\\x1B[0m`;\n      }\n      static code(name, target) {\n        let hash = 0;\n        for (let i = 0; i < name.length; i++) {\n          hash = (hash << 3) - hash + name.charCodeAt(i) + 13;\n          hash |= 0;\n        }\n        const colors = !target.colors ? [] : target.colors >= 2 ? c256 : c16;\n        return colors[Math.abs(hash) % colors.length];\n      }\n      static render(target, record) {\n        const prefix = `[${record.type[0].toUpperCase()}]`;\n        const space = \" \".repeat(target.label?.margin ?? 1);\n        let indent = 3 + space.length, output = \"\";\n        if (target.showTime) {\n          indent += target.showTime.length + space.length;\n          output += _Logger.color(target, 8, Time.template(target.showTime)) + space;\n        }\n        const code = _Logger.code(record.name, target);\n        const label = _Logger.color(target, code, record.name, \";1\");\n        const padLength = (target.label?.width ?? 0) + label.length - record.name.length;\n        if (target.label?.align === \"right\") {\n          output += label.padStart(padLength) + space + prefix + space;\n          indent += (target.label.width ?? 0) + space.length;\n        } else {\n          output += prefix + space + label.padEnd(padLength) + space;\n        }\n        output += record.content.replace(/\\n/g, \"\\n\" + \" \".repeat(indent));\n        if (target.showDiff && target.timestamp) {\n          const diff = record.timestamp - target.timestamp;\n          output += _Logger.color(target, code, \" +\" + Time.format(diff));\n        }\n        return output;\n      }\n      extend = (namespace) => {\n        return new _Logger(`${this.name}:${namespace}`, this.meta);\n      };\n      warning = (format, ...args) => {\n        this.warn(format, ...args);\n      };\n      createMethod(type, level) {\n        this[type] = (...args) => {\n          if (args.length === 1 && args[0] instanceof Error) {\n            if (args[0].cause) {\n              this[type](args[0].cause);\n            } else if (isAggregateError(args[0])) {\n              args[0].errors.forEach((error) => this[type](error));\n              return;\n            }\n          }\n          const id = ++_Logger.id;\n          const timestamp = Date.now();\n          for (const target of _Logger.targets) {\n            if (this.getLevel(target) < level)\n              continue;\n            const content = this.format(target, ...args);\n            const record = { id, type, level, name: this.name, meta: this.meta, content, timestamp };\n            if (target.record) {\n              target.record(record);\n            } else {\n              const { print = console.log } = target;\n              print(_Logger.render(target, record));\n            }\n            target.timestamp = timestamp;\n          }\n        };\n      }\n      format(target, ...args) {\n        if (args[0] instanceof Error) {\n          args[0] = args[0].stack || args[0].message;\n          args.unshift(\"%s\");\n        } else if (typeof args[0] !== \"string\") {\n          args.unshift(\"%o\");\n        }\n        let format = args.shift();\n        format = format.replace(/%([a-zA-Z%])/g, (match, char) => {\n          if (match === \"%%\")\n            return \"%\";\n          const formatter = _Logger.formatters[char];\n          if (typeof formatter === \"function\") {\n            const value = args.shift();\n            return formatter(value, target, this);\n          }\n          return match;\n        });\n        for (let arg of args) {\n          if (typeof arg === \"object\" && arg) {\n            arg = _Logger.formatters[\"o\"](arg, target, this);\n          }\n          format += \" \" + arg;\n        }\n        const { maxLength = 10240 } = target;\n        return format.split(/\\r?\\n/g).map((line) => {\n          return line.slice(0, maxLength) + (line.length > maxLength ? \"...\" : \"\");\n        }).join(\"\\n\");\n      }\n      getLevel(target) {\n        const paths = this.name.split(\":\");\n        let config = target?.levels || _Logger.levels;\n        do {\n          config = config[paths.shift()] ?? config[\"base\"];\n        } while (paths.length && typeof config === \"object\");\n        return config;\n      }\n      get level() {\n        return this.getLevel();\n      }\n      set level(value) {\n        const paths = this.name.split(\":\");\n        let config = _Logger.levels;\n        while (paths.length > 1) {\n          const name = paths.shift();\n          const value2 = config[name];\n          if (typeof value2 === \"object\") {\n            config = value2;\n          } else {\n            config = config[name] = { base: value2 ?? config.base };\n          }\n        }\n        config[paths[0]] = value;\n      }\n    };\n    Logger.format(\"s\", (value) => value);\n    Logger.format(\"d\", (value) => +value);\n    Logger.format(\"j\", (value) => JSON.stringify(value));\n    Logger.format(\"c\", (value, target, logger) => {\n      return Logger.color(target, Logger.code(logger.name, target), value);\n    });\n    Logger.format(\"C\", (value, target) => {\n      return Logger.color(target, 15, value, \";1\");\n    });\n    module.exports = Logger;\n  }\n});\n\n// src/browser.ts\nimport inspect from \"object-inspect\";\nvar require_browser = __commonJS({\n  \"src/browser.ts\"(exports, module) {\n    var import_shared = __toESM(require_shared());\n    import_shared.default.format(\"o\", (value, target) => {\n      return inspect(value, { depth: Infinity }).replace(/\\s*\\n\\s*/g, \" \");\n    });\n    module.exports = import_shared.default;\n  }\n});\nexport default require_browser();\n", "import { Context, Service } from '@cordisjs/core'\nimport { defineProperty } from 'cosmokit'\nimport Logger from 'reggol'\n\nexport { Logger }\n\ndeclare module '@cordisjs/core' {\n  interface Context {\n    logger: LoggerService\n  }\n}\n\ndeclare module 'reggol' {\n  namespace Logger {\n    interface Meta {\n      ctx?: Context\n    }\n  }\n}\n\nexport interface LoggerService extends Pick<Logger, Logger.Type | 'extend'> {\n  (name: string): Logger\n}\n\nexport class LoggerService extends Service {\n  constructor(ctx: Context) {\n    super(ctx, 'logger', true)\n\n    ctx.on('internal/info', function (format, ...args) {\n      this.logger('app').info(format, ...args)\n    })\n\n    ctx.on('internal/error', function (format, ...args) {\n      this.logger('app').error(format, ...args)\n    })\n\n    ctx.on('internal/warning', function (format, ...args) {\n      this.logger('app').warn(format, ...args)\n    })\n  }\n\n  [Service.invoke](name: string) {\n    return new Logger(name, defineProperty({}, 'ctx', this.ctx))\n  }\n\n  static {\n    for (const type of ['success', 'error', 'info', 'warn', 'debug', 'extend']) {\n      LoggerService.prototype[type] = function (this: LoggerService, ...args: any[]) {\n        return this(this.ctx.name)[type](...args)\n      }\n    }\n  }\n}\n\nexport default LoggerService\n", "import { defineProperty, remove } from 'cosmokit'\nimport { Context, Service } from '@cordisjs/core'\nimport Schema from 'schemastery'\n\nexport { default as Schema, default as z } from 'schemastery'\n\nconst kSchemaOrder = Symbol('cordis.schema.order')\n\ndeclare module '@cordisjs/core' {\n  interface Events {\n    'internal/service-schema'(): void\n  }\n}\n\nexport class SchemaService {\n  _data = Schema.intersect([]) as Schema & { list: Schema[] }\n\n  constructor(public ctx: Context) {\n    defineProperty(this, Service.tracker, {\n      property: 'ctx',\n    })\n  }\n\n  extend(schema: Schema, order = 0) {\n    const index = this._data.list.findIndex(a => a[kSchemaOrder] < order)\n    schema[kSchemaOrder] = order\n    return this.ctx.effect(() => {\n      if (index >= 0) {\n        this._data.list.splice(index, 0, schema)\n      } else {\n        this._data.list.push(schema)\n      }\n      this.ctx.emit('internal/service-schema')\n      return () => {\n        remove(this._data.list, schema)\n        this.ctx.emit('internal/service-schema')\n      }\n    })\n  }\n\n  toJSON() {\n    return this._data.toJSON()\n  }\n}\n\nexport default SchemaService\n", "import { Context, Service } from '@cordisjs/core'\nimport { remove } from 'cosmokit'\n\ndeclare module '@cordisjs/core' {\n  interface Context {\n    timer: TimerService\n    setTimeout(callback: () => void, delay: number): () => void\n    setInterval(callback: () => void, delay: number): () => void\n    sleep(delay: number): Promise<void>\n    throttle<F extends (...args: any[]) => void>(callback: F, delay: number, noTrailing?: boolean): WithDispose<F>\n    debounce<F extends (...args: any[]) => void>(callback: F, delay: number): WithDispose<F>\n  }\n}\n\ntype WithDispose<T> = T & { dispose: () => void }\n\nexport class TimerService extends Service {\n  constructor(ctx: Context) {\n    super(ctx, 'timer', true)\n    ctx.mixin('timer', ['setTimeout', 'setInterval', 'sleep', 'throttle', 'debounce'])\n  }\n\n  setTimeout(callback: () => void, delay: number) {\n    const dispose = this[Context.current].effect(() => {\n      const timer = setTimeout(() => {\n        dispose()\n        callback()\n      }, delay)\n      return () => clearTimeout(timer)\n    })\n    return dispose\n  }\n\n  setInterval(callback: () => void, delay: number) {\n    return this[Context.current].effect(() => {\n      const timer = setInterval(callback, delay)\n      return () => clearInterval(timer)\n    })\n  }\n\n  sleep(delay: number) {\n    const caller = this[Context.current]\n    return new Promise<void>((resolve, reject) => {\n      const dispose1 = this.setTimeout(() => {\n        dispose1()\n        dispose2()\n        resolve()\n      }, delay)\n      const dispose2 = caller.on('dispose', () => {\n        dispose1()\n        dispose2()\n        reject(new Error('Context has been disposed'))\n      })\n    })\n  }\n\n  private createWrapper(callback: (args: any[], check: () => boolean) => any, isDisposed = false) {\n    const caller = this[Context.current]\n    caller.scope.assertActive()\n\n    let timer: number | NodeJS.Timeout | undefined\n    const dispose = () => {\n      isDisposed = true\n      remove(caller.scope.disposables, dispose)\n      clearTimeout(timer)\n    }\n\n    const wrapper: any = (...args: any[]) => {\n      clearTimeout(timer)\n      timer = callback(args, () => !isDisposed && caller.scope.isActive)\n    }\n    wrapper.dispose = dispose\n    caller.scope.disposables.push(dispose)\n    return wrapper\n  }\n\n  throttle<F extends (...args: any[]) => void>(callback: F, delay: number, noTrailing?: boolean): WithDispose<F> {\n    let lastCall = -Infinity\n    const execute = (...args: any[]) => {\n      lastCall = Date.now()\n      callback(...args)\n    }\n    return this.createWrapper((args, isActive) => {\n      const now = Date.now()\n      const remaining = delay - (now - lastCall)\n      if (remaining <= 0) {\n        execute(...args)\n      } else if (isActive()) {\n        return setTimeout(execute, remaining, ...args)\n      }\n    }, noTrailing)\n  }\n\n  debounce<F extends (...args: any[]) => void>(callback: F, delay: number): WithDispose<F> {\n    return this.createWrapper((args, isActive) => {\n      if (!isActive()) return\n      return setTimeout(callback, delay, ...args)\n    })\n  }\n}\n\nexport default TimerService\n", "import * as core from '@cordisjs/core'\nimport { Logger, LoggerService } from '@cordisjs/logger'\nimport { SchemaService } from '@cordisjs/schema'\nimport { TimerService } from '@cordisjs/timer'\n\nexport * from '@cordisjs/core'\nexport { Schema, z } from '@cordisjs/schema'\nexport { Logger } from '@cordisjs/logger'\nexport { TimerService } from '@cordisjs/timer'\n\nexport interface Events<C extends Context = Context> extends core.Events<C> {}\n\nexport interface Context {\n  [Context.events]: Events<this>\n}\n\nexport class Context extends core.Context {\n  baseDir: string\n\n  constructor(config?: any) {\n    super(config)\n    this.baseDir = globalThis.process?.cwd?.() || ''\n\n    this.provide('logger', undefined, true)\n    this.provide('timer', undefined, true)\n\n    this.plugin(LoggerService)\n    this.plugin(TimerService)\n  }\n}\n\nexport abstract class Service<T = unknown, C extends Context = Context> extends core.Service<T, C> {\n  /** @deprecated use `this.ctx.logger` instead */\n  public logger: Logger\n  public schema: SchemaService\n\n  constructor(...args: core.Spread<T>)\n  constructor(ctx: C, ...args: core.Spread<T>)\n  constructor(ctx: C, name: string, immediate?: boolean)\n  constructor(...args: any) {\n    super(...args)\n    this.logger = this.ctx.logger(this.name)\n    this.schema = new SchemaService(this.ctx)\n  }\n\n  [core.Service.setup]() {\n    this.ctx = new Context() as C\n  }\n}\n\nexport default function () {}\n", "import { markRaw } from 'vue'\nimport * as cordis from 'cordis'\nimport { Context } from './context'\n\nexport abstract class Service<T = unknown, C extends Context = Context> extends cordis.Service<T, C> {}\n\nexport interface Ordered {\n  order?: number\n}\n\nexport function insert<T extends Ordered>(list: T[], item: T) {\n  markRaw(item)\n  const index = list.findIndex(a => a.order < item.order)\n  if (index >= 0) {\n    list.splice(index, 0, item)\n  } else {\n    list.push(item)\n  }\n}\n", "import { markRaw, MaybeRefOrGetter, reactive, shallowReactive, toValue } from 'vue'\nimport { Context, useContext } from '../context'\nimport { Dict, Intersect, remove } from 'cosmokit'\nimport { insert, Service } from '../utils'\nimport { ActionContext } from '..'\n\ndeclare module '../context' {\n  interface Context {\n    $action: ActionService\n    action(id: string, options: ActionOptions): () => void\n    menu(id: string, items: MenuItem[]): () => void\n    define<K extends keyof ActionContext>(key: K, value: MaybeRefOrGetter<ActionContext[K]>): () => void\n  }\n\n  interface Internal {\n    scope: Store<ActionContext>\n    menus: Dict<MenuItem[]>\n    actions: Dict<ActionOptions>\n    activeMenus: ActiveMenu[]\n  }\n}\n\nexport interface ActionOptions {\n  shortcut?: string\n  hidden?: (scope: Flatten<ActionContext>) => boolean\n  disabled?: (scope: Flatten<ActionContext>) => boolean\n  action: (scope: Flatten<ActionContext>) => any\n}\n\nexport type LegacyMenuItem = Partial<ActionOptions> & Omit<MenuItem, 'id'>\n\nexport interface MenuItem {\n  id: string\n  label?: MaybeGetter<string>\n  type?: MaybeGetter<string>\n  icon?: MaybeGetter<string>\n  order?: number\n}\n\nexport type MaybeGetter<T> = T | ((scope: Flatten<ActionContext>) => T)\n\ntype Store<S extends {}> = { [K in keyof S]?: MaybeRefOrGetter<S[K]> }\n\ntype Flatten<S extends {}> = Intersect<{\n  [K in keyof S]: K extends `${infer L}.${infer R}`\n    ? { [P in L]: Flatten<{ [P in R]: S[K] }> }\n    : { [P in K]: S[K] }\n}[keyof S]>\n\nexport interface ActiveMenu {\n  id: string\n  relative: {\n    left: number\n    top: number\n    right: number\n    bottom: number\n  }\n}\n\nexport function useMenu<K extends keyof ActionContext>(id: K) {\n  const ctx = useContext()\n  return (event: MouseEvent, value: MaybeRefOrGetter<ActionContext[K]>) => {\n    ctx.define(id, value)\n    event.preventDefault()\n    const { clientX, clientY } = event\n    ctx.internal.activeMenus.splice(0, Infinity, {\n      id,\n      relative: {\n        left: clientX,\n        top: clientY,\n        right: clientX,\n        bottom: clientY,\n      },\n    })\n  }\n}\n\nexport default class ActionService extends Service {\n  constructor(ctx: Context) {\n    super(ctx, '$action', true)\n    ctx.mixin('$action', ['action', 'menu', 'define'])\n\n    ctx.internal.scope = shallowReactive({})\n    ctx.internal.menus = reactive({})\n    ctx.internal.actions = reactive({})\n    ctx.internal.activeMenus = reactive([])\n\n    ctx.addEventListener('keydown', (event) => {\n      const scope = this.createScope()\n      for (const action of Object.values(ctx.internal.actions)) {\n        if (!action.shortcut) continue\n        const keys = action.shortcut.split('+').map(key => key.toLowerCase().trim())\n        let ctrlKey = false, shiftKey = false, metaKey = false, code: string\n        for (const key of keys) {\n          switch (key) {\n            case 'shift': shiftKey = true; continue\n            case 'ctrl':\n              if (navigator.platform.toLowerCase().includes('mac')) {\n                metaKey = true\n              } else {\n                ctrlKey = true\n              }\n              continue\n            default:\n              code = key\n          }\n        }\n        if (ctrlKey !== event.ctrlKey) continue\n        if (shiftKey !== event.shiftKey) continue\n        if (metaKey !== event.metaKey) continue\n        if (code !== event.key.toLowerCase()) continue\n        if (action.disabled?.(scope)) continue\n        event.preventDefault()\n        action.action(scope)\n      }\n    })\n  }\n\n  action(id: string, options: ActionOptions) {\n    markRaw(options)\n    return this.ctx.effect(() => {\n      this.ctx.internal.actions[id] = options\n      return () => delete this.ctx.internal.actions[id]\n    })\n  }\n\n  menu(id: string, items: MenuItem[]) {\n    return this.ctx.effect(() => {\n      const list = this.ctx.internal.menus[id] ||= []\n      items.forEach(item => insert(list, item))\n      return () => {\n        items.forEach(item => remove(list, item))\n        if (!list.length) delete this.ctx.internal.menus[id]\n      }\n    })\n  }\n\n  define<K extends keyof ActionContext>(key: K, value: MaybeRefOrGetter<ActionContext[K]>) {\n    return this.ctx.effect(() => {\n      this.ctx.internal.scope[key] = value as any\n      return () => delete this.ctx.internal.scope[key]\n    })\n  }\n\n  createScope(override = {}) {\n    const scope = { ...this.ctx.internal.scope, ...override }\n    return createScope(scope)\n  }\n}\n\nfunction createScope(scope: Store<ActionContext>, prefix = '') {\n  return new Proxy({}, {\n    get: (target, key) => {\n      if (typeof key === 'symbol') return target[key]\n      key = prefix + key\n      if (key in scope) return toValue(scope[key])\n      const _prefix = key + '.'\n      if (Object.keys(scope).some(k => k.startsWith(_prefix))) {\n        return createScope(scope, key + '.')\n      }\n    },\n  })\n}\n", "import { Schema, SchemaBase } from '@koishijs/components'\nimport { RemovableRef, useLocalStorage } from '@vueuse/core'\nimport { Context } from '../context'\nimport { insert, Ordered, Service } from '../utils'\nimport { Dict, remove } from 'cosmokit'\nimport { Component, computed, markRaw, reactive, ref, watch } from 'vue'\nimport { Config } from '..'\n\ndeclare module '../context' {\n  interface Context {\n    $setting: SettingService\n    schema(extension: SchemaBase.Extension): () => void\n    settings(options: SettingOptions): () => void\n  }\n\n  interface Internal {\n    settings: Dict<SettingOptions[]>\n  }\n}\n\ninterface SettingOptions extends Ordered {\n  id: string\n  title?: string\n  disabled?: () => boolean\n  schema?: Schema\n  component?: Component\n}\n\nexport let useStorage = <T extends object>(key: string, version: number, fallback?: () => T): RemovableRef<T> => {\n  const initial = fallback ? fallback() : {} as T\n  initial['__version__'] = version\n  const storage = useLocalStorage('koishi.console.' + key, initial)\n  if (storage.value['__version__'] !== version) {\n    storage.value = initial\n  }\n  return storage\n}\n\nexport function provideStorage(factory: typeof useStorage) {\n  useStorage = factory\n}\n\ninterface StorageData<T> {\n  version: number\n  data: T\n}\n\n/** @deprecated use `useConfig` instead */\nexport function createStorage<T extends object>(key: string, version: number, fallback?: () => T) {\n  const storage = useLocalStorage('koishi.console.' + key, {} as StorageData<T>)\n  const initial = fallback ? fallback() : {} as T\n  if (storage.value.version !== version) {\n    storage.value = { version, data: initial }\n  } else if (!Array.isArray(storage.value.data)) {\n    storage.value.data = { ...initial, ...storage.value.data }\n  }\n  return reactive<T>(storage.value['data'])\n}\n\nexport const original = useStorage<Config>('config', undefined, () => ({\n  theme: {\n    mode: 'auto',\n    dark: 'default-dark',\n    light: 'default-light',\n  },\n  locale: 'zh-CN',\n}))\n\nexport const resolved = ref({} as Config)\n\nexport const useConfig = (useOriginal = false) => useOriginal ? original : resolved\n\nexport default class SettingService extends Service {\n  constructor(ctx: Context) {\n    super(ctx, '$setting', true)\n    ctx.mixin('$setting', {\n      settings: 'settings',\n      extendSchema: 'schema',\n    })\n\n    ctx.internal.settings = reactive({})\n\n    this.settings({\n      id: '',\n      title: '通用设置',\n      order: 1000,\n      schema: Schema.object({\n        locale: Schema.union(['zh-CN', 'en-US']).description('语言设置。'),\n      }).description('通用设置'),\n    })\n\n    const schema = computed(() => {\n      const list: Schema[] = []\n      for (const settings of Object.values(ctx.internal.settings)) {\n        for (const options of settings) {\n          if (options.schema) {\n            list.push(options.schema)\n          }\n        }\n      }\n      return Schema.intersect(list)\n    })\n\n    const doWatch = () => watch(resolved, (value) => {\n      console.debug('config', JSON.stringify(value))\n      original.value = schema.value.simplify(value)\n    }, { deep: true })\n\n    let stop = doWatch()\n\n    const update = () => {\n      stop?.()\n      try {\n        resolved.value = schema.value(original.value)\n      } catch (error) {\n        console.error(error)\n      }\n      stop = doWatch()\n    }\n\n    ctx.effect(() => () => stop?.())\n\n    ctx.effect(() => watch(original, update, { deep: true }))\n    ctx.effect(() => watch(schema, update))\n  }\n\n  extendSchema(extension: SchemaBase.Extension) {\n    extension.component = this.ctx.wrapComponent(extension.component)\n    return this.ctx.effect(() => {\n      SchemaBase.extensions.add(extension)\n      return () => SchemaBase.extensions.delete(extension)\n    })\n  }\n\n  settings(options: SettingOptions) {\n    markRaw(options)\n    options.order ??= 0\n    options.component = this.ctx.wrapComponent(options.component)\n    return this.ctx.effect(() => {\n      const list = this.ctx.internal.settings[options.id] ||= []\n      insert(list, options)\n      return () => {\n        remove(list, options)\n        if (!list.length) delete this.ctx.internal.settings[options.id]\n      }\n    })\n  }\n}\n", "import { watchEffect } from 'vue'\nimport { createI18n } from 'vue-i18n'\nimport { useConfig } from './setting'\nimport { Context } from '../context'\nimport { Service } from '../utils'\n\ndeclare module '../context' {\n  interface Context {\n    $i18n: I18nService\n  }\n}\n\nconst config = useConfig()\n\nexport default class I18nService extends Service {\n  public i18n = createI18n({\n    legacy: false,\n    fallbackLocale: 'zh-CN',\n  })\n\n  constructor(ctx: Context) {\n    super(ctx, '$i18n', true)\n\n    ctx.effect(() => watchEffect(() => {\n      this.i18n.global.locale.value = config.value.locale\n    }, { flush: 'post' }))\n  }\n}\n", "import { Ref, ref, shallowReactive, watch } from 'vue'\nimport { Context } from '../context'\nimport { Service } from '../utils'\nimport { receive, store } from '../data'\nimport { EffectScope } from 'cordis'\nimport { Dict } from 'cosmokit'\n\ndeclare module '../context' {\n  interface Context {\n    $loader: LoaderService\n    extension?: LoadResult\n  }\n}\n\nexport type Disposable = () => void\nexport type Extension = (ctx: Context) => void\n\nexport function defineExtension(callback: Extension) {\n  return callback\n}\n\nexport function unwrapExports(module: any) {\n  return module?.default || module\n}\n\nconst loaders: Dict<(ctx: Context, url: string) => Promise<void>> = {\n  async [`.css`](ctx, url) {\n    const link = document.createElement('link')\n    link.rel = 'stylesheet'\n    link.href = url\n    await new Promise((resolve, reject) => {\n      link.onload = resolve\n      link.onerror = reject\n      ctx.effect(() => {\n        document.head.appendChild(link)\n        return () => document.head.removeChild(link)\n      })\n    })\n  },\n  async [``](ctx, url) {\n    const exports = await import(/* @vite-ignore */ url)\n    ctx.plugin(unwrapExports(exports), ctx.extension.data)\n  },\n}\n\nexport interface LoadResult {\n  scope: EffectScope\n  paths: string[]\n  done: Ref<boolean>\n  data: Ref\n}\n\nexport default class LoaderService extends Service {\n  private backendId: any\n\n  public extensions: Dict<LoadResult> = shallowReactive({})\n\n  constructor(ctx: Context) {\n    super(ctx, '$loader', true)\n\n    receive('entry-data', ({ id, data }) => {\n      const entry = store.entry?.[id]\n      if (!entry) return\n      entry.data = data\n      this.extensions[id].data.value = data\n    })\n  }\n\n  initTask = new Promise<void>((resolve) => {\n    watch(() => store.entry, async (newValue, oldValue) => {\n      const { _id, ...rest } = newValue || {}\n      if (this.backendId && _id && this.backendId !== _id) {\n        window.location.reload()\n        return\n      }\n      this.backendId = _id\n\n      for (const key in this.extensions) {\n        if (rest[key]) continue\n        this.extensions[key].scope.dispose()\n        delete this.extensions[key]\n      }\n\n      await Promise.all(Object.entries(rest).map(([key, { files, paths, data }]) => {\n        if (this.extensions[key]) return\n        const scope = this.ctx.isolate('extension').plugin(() => {})\n        scope.ctx.extension = this.extensions[key] = { done: ref(false), scope, paths, data: ref(data) }\n        const task = Promise.all(files.map((url) => {\n          for (const ext in loaders) {\n            if (!url.endsWith(ext)) continue\n            return loaders[ext](scope.ctx, url)\n          }\n        }))\n        task.finally(() => this.extensions[key].done.value = true)\n      }))\n\n      if (!oldValue) resolve()\n    }, { deep: true })\n  })\n}\n", "import { createRouter, createWebHistory, START_LOCATION } from 'vue-router'\nimport Overlay from '../components/chat/overlay.vue'\nimport { Context } from '../context'\nimport { insert, Service } from '../utils'\nimport { Component, MaybeRefOrGetter, reactive, ref, toValue } from 'vue'\nimport { global, Store, store } from '../data'\nimport { Dict, omit, remove } from 'cosmokit'\nimport { Disposable } from 'cordis'\nimport { SlotOptions } from '../components'\n\ndeclare module 'vue-router' {\n  interface RouteMeta {\n    activity?: Activity\n  }\n}\n\ndeclare module '../context' {\n  interface Context {\n    $router: RouterService\n    slot(options: SlotOptions): () => void\n    page(options: Activity.Options): () => void\n  }\n\n  interface Events {\n    'activity'(activity: Activity): boolean\n  }\n}\n\nexport namespace Activity {\n  export interface Options {\n    id?: string\n    path: string\n    strict?: boolean\n    component: Component\n    name: MaybeRefOrGetter<string>\n    desc?: MaybeRefOrGetter<string>\n    icon?: MaybeRefOrGetter<string>\n    order?: number\n    authority?: number\n    position?: 'top' | 'bottom'\n    fields?: (keyof Store)[]\n    /** @deprecated */\n    when?: () => boolean\n    disabled?: () => boolean\n  }\n}\n\nexport interface Activity extends Activity.Options {}\n\nfunction getActivityId(path: string) {\n  return path.split('/').find(Boolean) ?? ''\n}\n\nexport const redirectTo = ref<string>()\n\nexport class Activity {\n  id: string\n  _disposables: Disposable[] = []\n\n  constructor(public ctx: Context, public options: Activity.Options) {\n    options.order ??= 0\n    options.position ??= 'top'\n    Object.assign(this, omit(options, ['icon', 'name', 'desc', 'disabled']))\n    const { path, id = getActivityId(path), component } = options\n    this._disposables.push(ctx.$router.router.addRoute({ path, name: id, component, meta: { activity: this } }))\n    this.id ??= id\n    this.handleUpdate()\n    this.authority ??= 0\n    this.fields ??= []\n    ctx.$router.pages[this.id] = this\n  }\n\n  handleUpdate() {\n    if (redirectTo.value) {\n      const location = this.ctx.$router.router.resolve(redirectTo.value)\n      if (location.matched.length) {\n        redirectTo.value = null\n        this.ctx.$router.router.replace(location)\n      }\n    }\n  }\n\n  get icon() {\n    return toValue(this.options.icon ?? 'activity:default')\n  }\n\n  get name() {\n    return toValue(this.options.name ?? this.id)\n  }\n\n  get desc() {\n    return toValue(this.options.desc)\n  }\n\n  disabled() {\n    if (this.ctx.bail('activity', this)) return true\n    if (!this.fields.every(key => store[key])) return true\n    if (this.when && !this.when()) return true\n    if (this.options.disabled?.()) return true\n  }\n\n  dispose() {\n    this._disposables.forEach(dispose => dispose())\n    const current = this.ctx.$router.router.currentRoute.value\n    if (current?.meta?.activity === this) {\n      redirectTo.value = current.fullPath\n      this.ctx.$router.router.push(this.ctx.$router.cache['home'] || '/')\n    }\n    return delete this.ctx.$router.pages[this.id]\n  }\n}\n\nexport default class RouterService extends Service {\n  public views = reactive<Dict<SlotOptions[]>>({})\n  public cache = reactive<Record<keyof any, string>>({})\n  public pages = reactive<Dict<Activity>>({})\n  public router = createRouter({\n    history: createWebHistory(global.uiPath),\n    linkActiveClass: 'active',\n    routes: [],\n  })\n\n  constructor(ctx: Context) {\n    super(ctx, '$router', true)\n    ctx.mixin('$router', ['slot', 'page'])\n\n    const initialTitle = document.title\n    ctx.effect(() => this.router.afterEach((route) => {\n      const { name, fullPath } = this.router.currentRoute.value\n      this.cache[name] = fullPath\n      if (route.meta.activity) {\n        document.title = `${route.meta.activity.name}`\n        if (initialTitle) document.title += ` | ${initialTitle}`\n      }\n    }))\n\n    this.router.beforeEach(async (to, from) => {\n      if (to.matched.length) {\n        if (to.matched[0].path !== '/') {\n          redirectTo.value = null\n        }\n        return\n      }\n\n      if (from === START_LOCATION) {\n        await ctx.$loader.initTask\n        to = this.router.resolve(to)\n        if (to.matched.length) return to\n      }\n\n      redirectTo.value = to.fullPath\n      const result = this.cache['home'] || '/'\n      if (result === to.fullPath) return\n      return result\n    })\n\n    this.slot({\n      type: 'global',\n      component: Overlay,\n    })\n  }\n\n  slot(options: SlotOptions) {\n    options.order ??= 0\n    options.component = this.ctx.wrapComponent(options.component)\n    if (options.when) options.disabled = () => !options.when()\n    return this.ctx.effect(() => {\n      const list = this.views[options.type] ||= []\n      insert(list, options)\n      return () => {\n        remove(list, options)\n        if (!list.length) delete this.views[options.type]\n      }\n    })\n  }\n\n  page(options: Activity.Options) {\n    options.component = this.ctx.wrapComponent(options.component)\n    return this.ctx.effect(() => {\n      const activity = new Activity(this.ctx, options)\n      return () => activity.dispose()\n    })\n  }\n}\n", "import { Dict } from 'cosmokit'\nimport { Schema } from '@koishijs/components'\nimport { Context } from '../context'\nimport { Component, computed, markRaw, reactive, watchEffect } from 'vue'\nimport { useConfig } from './setting'\nimport { Service } from '../utils'\nimport { usePreferredDark } from '@vueuse/core'\n\ndeclare module '../context' {\n  interface Context {\n    $theme: ThemeService\n    theme(options: ThemeOptions): () => void\n  }\n\n  interface Internal {\n    themes: Dict<ThemeOptions>\n  }\n}\n\ndeclare module '..' {\n  interface Config {\n    theme: Config.Theme\n  }\n\n  export namespace Config {\n    export interface Theme {\n      mode: 'auto' | 'dark' | 'light'\n      dark: string\n      light: string\n    }\n  }\n}\n\nexport interface ThemeOptions {\n  id: string\n  name: string | Dict<string>\n  components?: Dict<Component>\n}\n\nconst preferDark = usePreferredDark()\n\nconst config = useConfig()\n\nconst colorMode = computed(() => {\n  const mode = config.value.theme.mode\n  if (mode !== 'auto') return mode\n  return preferDark.value ? 'dark' : 'light'\n})\n\nexport const useColorMode = () => colorMode\n\nexport default class ThemeService extends Service {\n  constructor(ctx: Context) {\n    super(ctx, '$theme', true)\n    ctx.mixin('$theme', ['theme'])\n\n    ctx.internal.themes = reactive({})\n\n    ctx.settings({\n      id: 'appearance',\n      title: '外观设置',\n      order: 900,\n      schema: Schema.object({\n        theme: Schema.object({\n          mode: Schema.union([\n            Schema.const('auto').description('跟随系统'),\n            Schema.const('dark').description('深色'),\n            Schema.const('light').description('浅色'),\n          ]).default('auto').description('主题偏好。'),\n          dark: Schema.string().role('theme', { mode: 'dark' }).default('default-dark').description('深色主题。'),\n          light: Schema.string().role('theme', { mode: 'light' }).default('default-light').description('浅色主题。'),\n        }).description('主题设置'),\n      }),\n    })\n\n    ctx.effect(() => watchEffect(() => {\n      if (!config.value.theme) return\n      const root = window.document.querySelector('html')\n      root.setAttribute('theme', config.value.theme[colorMode.value])\n      if (colorMode.value === 'dark') {\n        root.classList.add('dark')\n      } else {\n        root.classList.remove('dark')\n      }\n    }, { flush: 'post' }))\n  }\n\n  theme(options: ThemeOptions) {\n    markRaw(options)\n    for (const [type, component] of Object.entries(options.components || {})) {\n      this.ctx.slot({\n        type,\n        disabled: () => config.value.theme[colorMode.value] !== options.id,\n        component,\n      })\n    }\n    return this.ctx.effect(() => {\n      this.ctx.internal.themes[options.id] = options\n      return () => delete this.ctx.internal.themes[options.id]\n    })\n  }\n}\n", "import * as cordis from 'cordis'\nimport {\n  App, Component, createApp, defineComponent, h, inject, markRaw,\n  onBeforeUnmount, provide, Ref, resolveComponent,\n} from 'vue'\nimport ActionService from './plugins/action'\nimport I18nService from './plugins/i18n'\nimport LoaderService from './plugins/loader'\nimport RouterService from './plugins/router'\nimport SettingService from './plugins/setting'\nimport ThemeService from './plugins/theme'\n\n// layout api\n\nexport interface Events<C extends Context = Context> extends cordis.Events<C> {}\n\nexport interface Context {\n  [Context.events]: Events<this>\n  internal: Internal\n}\n\nexport function useContext() {\n  const parent = inject('cordis') as Context\n  const fork = parent.plugin(() => {})\n  onBeforeUnmount(() => fork.dispose())\n  return fork.ctx\n}\n\nexport function useRpc<T>(): Ref<T> {\n  const parent = inject('cordis') as Context\n  return parent.extension?.data\n}\n\nexport interface Internal {}\n\nexport class Context extends cordis.Context {\n  app: App\n\n  constructor() {\n    super()\n    this.extension = null\n    this.internal = {} as Internal\n    this.app = createApp(defineComponent({\n      setup: () => () => [\n        h(resolveComponent('k-slot'), { name: 'root', single: true }),\n        h(resolveComponent('k-slot'), { name: 'global' }),\n      ],\n    }))\n    this.app.provide('cordis', this)\n\n    this.plugin(ActionService)\n    this.plugin(I18nService)\n    this.plugin(LoaderService)\n    this.plugin(RouterService)\n    this.plugin(SettingService)\n    this.plugin(ThemeService)\n\n    this.on('ready', async () => {\n      await this.$loader.initTask\n      this.app.use(this.$i18n.i18n)\n      this.app.use(this.$router.router)\n      this.app.mount('#app')\n    })\n  }\n\n  addEventListener<K extends keyof WindowEventMap>(\n    type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ) {\n    return this.effect(() => {\n      window.addEventListener(type, listener, options)\n      return () => window.removeEventListener(type, listener, options)\n    })\n  }\n\n  wrapComponent(component: Component) {\n    if (!component) return\n    if (!this.extension) return component\n    return defineComponent((props, { slots }) => {\n      provide('cordis', this)\n      return () => h(component, props, slots)\n    })\n  }\n}\n\nmarkRaw(cordis.Context.prototype)\nmarkRaw(cordis.EffectScope.prototype)\n", "import { App, defineComponent, h } from 'vue'\nimport { RouterLink } from 'vue-router'\nimport { useContext } from '../context'\n\nconst KActivityLink = defineComponent({\n  props: {\n    id: String,\n  },\n  setup(props, { slots }) {\n    const ctx = useContext()\n    return () => {\n      const activity = ctx.$router.pages[props.id]\n      return h(RouterLink, {\n        to: ctx.$router.cache[activity?.id] || activity?.path.replace(/:.+/, ''),\n      }, {\n        default: () => slots.default?.() ?? activity?.name,\n      })\n    }\n  },\n})\n\nexport default function (app: App) {\n  app.component('k-activity-link', KActivityLink)\n}\n", "import { useContext } from '../context'\nimport { App, Component, defineComponent, h } from 'vue'\n\nexport interface SlotItem {\n  order?: number\n  component: Component\n}\n\nexport interface SlotOptions extends SlotItem {\n  type: string\n  /** @deprecated */\n  when?: () => boolean\n  disabled?: () => boolean\n}\n\nexport const KSlot = defineComponent({\n  props: {\n    name: String,\n    data: Object,\n    single: Boolean,\n  },\n  setup(props, { slots }) {\n    const ctx = useContext()\n    return () => {\n      const internal = props.single ? [] : [...slots.default?.() || []]\n        .filter(node => node.type === KSlotItem)\n        .map(node => ({ node, order: node.props?.order || 0 }))\n      const external = [...ctx.$router.views[props.name] || []]\n        .filter(item => !item.disabled?.())\n        .map(item => ({\n          node: h(item.component, { ...props.data }, slots),\n          order: item.order,\n          layer: 1,\n        }))\n      const children = [...internal, ...external].sort((a, b) => b.order - a.order)\n      if (props.single) {\n        return children[0]?.node || slots.default?.()\n      }\n      return children.map(item => item.node)\n    }\n  },\n})\n\nconst KSlotItem = defineComponent({\n  props: {\n    order: Number,\n  },\n  setup(props, { slots }) {\n    return () => slots.default?.()\n  },\n})\n\nfunction defineSlotComponent(name: string) {\n  return defineComponent({\n    inheritAttrs: false,\n    setup(_, { slots, attrs }) {\n      return () => h(KSlot, { name, data: attrs, single: true }, slots)\n    },\n  })\n}\n\nexport default (app: App) => {\n  app.component('k-slot', KSlot)\n  app.component('k-slot-item', KSlotItem)\n  app.component('k-layout', defineSlotComponent('layout'))\n  app.component('k-status', defineSlotComponent('status'))\n}\n", "import Element from '@satorijs/element'\nimport { Dict } from 'cosmokit'\n\nexport interface SendOptions {\n  linkPreview?: boolean\n}\n\nexport interface Upload {\n  type: string\n  filename?: string\n  data: ArrayBuffer\n}\n\nexport interface Response {\n  status: number\n  statusText?: string\n  data?: ArrayBuffer\n  headers?: Headers\n}\n\nexport interface Field {\n  name: string\n}\n\nfunction Field(name: string): Field {\n  return { name }\n}\n\nexport interface Method {\n  name: string\n  fields: Field[]\n  isForm: boolean\n}\n\nfunction Method(name: string, fields: string[], isForm = false): Method {\n  return { name, fields: fields.map(Field), isForm }\n}\n\nexport const Methods: Dict<Method> = {\n  'channel.get': Method('getChannel', ['channel_id', 'guild_id']),\n  'channel.list': Method('getChannelList', ['guild_id', 'next']),\n  'channel.create': Method('createChannel', ['guild_id', 'data']),\n  'channel.update': Method('updateChannel', ['channel_id', 'data']),\n  'channel.delete': Method('deleteChannel', ['channel_id']),\n  'channel.mute': Method('muteChannel', ['channel_id', 'guild_id', 'enable']),\n\n  'message.create': Method('createMessage', ['channel_id', 'content']),\n  'message.update': Method('editMessage', ['channel_id', 'message_id', 'content']),\n  'message.delete': Method('deleteMessage', ['channel_id', 'message_id']),\n  'message.get': Method('getMessage', ['channel_id', 'message_id']),\n  'message.list': Method('getMessageList', ['channel_id', 'next', 'direction', 'limit', 'order']),\n\n  'reaction.create': Method('createReaction', ['channel_id', 'message_id', 'emoji']),\n  'reaction.delete': Method('deleteReaction', ['channel_id', 'message_id', 'emoji', 'user_id']),\n  'reaction.clear': Method('clearReaction', ['channel_id', 'message_id', 'emoji']),\n  'reaction.list': Method('getReactionList', ['channel_id', 'message_id', 'emoji', 'next']),\n\n  'upload.create': Method('createUpload', [], true),\n\n  'guild.get': Method('getGuild', ['guild_id']),\n  'guild.list': Method('getGuildList', ['next']),\n\n  'guild.member.get': Method('getGuildMember', ['guild_id', 'user_id']),\n  'guild.member.list': Method('getGuildMemberList', ['guild_id', 'next']),\n  'guild.member.kick': Method('kickGuildMember', ['guild_id', 'user_id', 'permanent']),\n  'guild.member.mute': Method('muteGuildMember', ['guild_id', 'user_id', 'duration', 'reason']),\n  'guild.member.role.set': Method('setGuildMemberRole', ['guild_id', 'user_id', 'role_id']),\n  'guild.member.role.unset': Method('unsetGuildMemberRole', ['guild_id', 'user_id', 'role_id']),\n\n  'guild.role.list': Method('getGuildRoleList', ['guild_id', 'next']),\n  'guild.role.create': Method('createGuildRole', ['guild_id', 'data']),\n  'guild.role.update': Method('updateGuildRole', ['guild_id', 'role_id', 'data']),\n  'guild.role.delete': Method('deleteGuildRole', ['guild_id', 'role_id']),\n\n  'login.get': Method('getLogin', []),\n  'user.get': Method('getUser', ['user_id']),\n  'user.channel.create': Method('createDirectChannel', ['user_id', 'guild_id']),\n  'friend.list': Method('getFriendList', ['next']),\n  'friend.delete': Method('deleteFriend', ['user_id']),\n\n  'friend.approve': Method('handleFriendRequest', ['message_id', 'approve', 'comment']),\n  'guild.approve': Method('handleGuildRequest', ['message_id', 'approve', 'comment']),\n  'guild.member.approve': Method('handleGuildMemberRequest', ['message_id', 'approve', 'comment']),\n}\n\nexport interface List<T> {\n  data: T[]\n  next?: string\n}\n\nexport interface TwoWayList<T> {\n  data: T[]\n  prev?: string\n  next?: string\n}\n\nexport type Direction = 'before' | 'after' | 'around'\n\nexport type Order = 'asc' | 'desc'\n\nexport interface Methods {\n  // message\n  createMessage(channelId: string, content: Element.Fragment, guildId?: string, options?: SendOptions): Promise<Message[]>\n  sendMessage(channelId: string, content: Element.Fragment, guildId?: string, options?: SendOptions): Promise<string[]>\n  sendPrivateMessage(userId: string, content: Element.Fragment, guildId?: string, options?: SendOptions): Promise<string[]>\n  getMessage(channelId: string, messageId: string): Promise<Message>\n  getMessageList(channelId: string, next?: string, direction?: Direction, limit?: number, order?: Order): Promise<TwoWayList<Message>>\n  getMessageIter(channelId: string): AsyncIterable<Message>\n  editMessage(channelId: string, messageId: string, content: Element.Fragment): Promise<void>\n  deleteMessage(channelId: string, messageId: string): Promise<void>\n\n  // reaction\n  createReaction(channelId: string, messageId: string, emoji: string): Promise<void>\n  deleteReaction(channelId: string, messageId: string, emoji: string, userId?: string): Promise<void>\n  clearReaction(channelId: string, messageId: string, emoji?: string): Promise<void>\n  getReactionList(channelId: string, messageId: string, emoji: string, next?: string): Promise<List<User>>\n  getReactionIter(channelId: string, messageId: string, emoji: string): AsyncIterable<User>\n\n  // upload\n  createUpload(...uploads: Upload[]): Promise<string[]>\n\n  // user\n  getLogin(): Promise<Login>\n  getUser(userId: string, guildId?: string): Promise<User>\n  getFriendList(next?: string): Promise<List<User>>\n  getFriendIter(): AsyncIterable<User>\n  deleteFriend(userId: string): Promise<void>\n\n  // guild\n  getGuild(guildId: string): Promise<Guild>\n  getGuildList(next?: string): Promise<List<Guild>>\n  getGuildIter(): AsyncIterable<Guild>\n\n  // guild member\n  getGuildMember(guildId: string, userId: string): Promise<GuildMember>\n  getGuildMemberList(guildId: string, next?: string): Promise<List<GuildMember>>\n  getGuildMemberIter(guildId: string): AsyncIterable<GuildMember>\n  kickGuildMember(guildId: string, userId: string, permanent?: boolean): Promise<void>\n  muteGuildMember(guildId: string, userId: string, duration: number, reason?: string): Promise<void>\n\n  // role\n  setGuildMemberRole(guildId: string, userId: string, roleId: string): Promise<void>\n  unsetGuildMemberRole(guildId: string, userId: string, roleId: string): Promise<void>\n  getGuildRoleList(guildId: string, next?: string): Promise<List<GuildRole>>\n  getGuildRoleIter(guildId: string): AsyncIterable<GuildRole>\n  createGuildRole(guildId: string, data: Partial<GuildRole>): Promise<GuildRole>\n  updateGuildRole(guildId: string, roleId: string, data: Partial<GuildRole>): Promise<void>\n  deleteGuildRole(guildId: string, roleId: string): Promise<void>\n\n  // channel\n  getChannel(channelId: string, guildId?: string): Promise<Channel>\n  getChannelList(guildId: string, next?: string): Promise<List<Channel>>\n  getChannelIter(guildId: string): AsyncIterable<Channel>\n  createDirectChannel(userId: string, guildId?: string): Promise<Channel>\n  createChannel(guildId: string, data: Partial<Channel>): Promise<Channel>\n  updateChannel(channelId: string, data: Partial<Channel>): Promise<void>\n  deleteChannel(channelId: string): Promise<void>\n  muteChannel(channelId: string, guildId?: string, enable?: boolean): Promise<void>\n\n  // request\n  handleFriendRequest(messageId: string, approve: boolean, comment?: string): Promise<void>\n  handleGuildRequest(messageId: string, approve: boolean, comment?: string): Promise<void>\n  handleGuildMemberRequest(messageId: string, approve: boolean, comment?: string): Promise<void>\n\n  // commands\n  updateCommands(commands: Command[]): Promise<void>\n}\n\nexport interface Channel {\n  id: string\n  type: Channel.Type\n  name?: string\n  parentId?: string\n  position?: number\n}\n\nexport namespace Channel {\n  export const enum Type {\n    TEXT = 0,\n    DIRECT = 1,\n    CATEGORY = 2,\n    VOICE = 3,\n  }\n}\n\nexport interface Guild {\n  id: string\n  name?: string\n  avatar?: string\n}\n\nexport interface GuildRole {\n  id: string\n  name: string\n  color: number\n  position: number\n  permissions: bigint\n  hoist: boolean\n  mentionable: boolean\n}\n\nexport interface User {\n  id: string\n  name?: string\n  nick?: string\n  /** @deprecated */\n  userId?: string\n  /** @deprecated */\n  username?: string\n  /** @deprecated */\n  nickname?: string\n  avatar?: string\n  discriminator?: string\n  isBot?: boolean\n}\n\nexport interface GuildMember {\n  user?: User\n  name?: string\n  nick?: string\n  avatar?: string\n  title?: string\n  roles?: string[]\n  joinedAt?: number\n}\n\nexport interface Login {\n  user?: User\n  platform?: string\n  /** @deprecated use `login.user.id` instead */\n  selfId?: string\n  hidden?: boolean\n  status: Status\n  features: string[]\n  proxyUrls: string[]\n}\n\nexport const enum Status {\n  OFFLINE = 0,\n  ONLINE = 1,\n  CONNECT = 2,\n  DISCONNECT = 3,\n  RECONNECT = 4,\n}\n\nexport interface Message {\n  id?: string\n  /** @deprecated */\n  messageId?: string\n  channel?: Channel\n  guild?: Guild\n  user?: User\n  member?: GuildMember\n  content?: string\n  elements?: Element[]\n  timestamp?: number\n  quote?: Message\n  createdAt?: number\n  updatedAt?: number\n}\n\nexport interface Button {\n  id: string\n}\n\nexport interface Command {\n  name: string\n  description: Dict<string>\n  arguments: Command.Declaration[]\n  options: Command.Declaration[]\n  children: Command[]\n}\n\nexport namespace Command {\n  export interface Declaration {\n    name: string\n    description: Dict<string>\n    type: string\n    required: boolean\n  }\n}\n\nexport interface Argv {\n  name: string\n  arguments: any[]\n  options: Dict\n}\n\ntype Genres = 'friend' | 'channel' | 'guild' | 'guild-member' | 'guild-role' | 'guild-file' | 'guild-emoji'\ntype Actions = 'added' | 'deleted' | 'updated'\n\nexport type EventName =\n  | `${Genres}-${Actions}`\n  | 'message'\n  | 'message-deleted'\n  | 'message-updated'\n  | 'message-pinned'\n  | 'message-unpinned'\n  | 'interaction/command'\n  | 'reaction-added'\n  | 'reaction-deleted'\n  | 'reaction-deleted/one'\n  | 'reaction-deleted/all'\n  | 'reaction-deleted/emoji'\n  | 'send'\n  | 'friend-request'\n  | 'guild-request'\n  | 'guild-member-request'\n\nexport interface Event {\n  id: number\n  type: string\n  selfId: string\n  platform: string\n  timestamp: number\n  argv?: Argv\n  channel?: Channel\n  guild?: Guild\n  login?: Login\n  member?: GuildMember\n  message?: Message\n  operator?: User\n  role?: GuildRole\n  user?: User\n  button?: Button\n  _type?: string\n  _data?: any\n  /** @deprecated */\n  subtype?: string\n  /** @deprecated */\n  subsubtype?: string\n}\n\nexport type MessageLike = Message | Event\n\nexport const enum Opcode {\n  EVENT = 0,\n  PING = 1,\n  PONG = 2,\n  IDENTIFY = 3,\n  READY = 4,\n}\n\nexport interface GatewayPayloadStructure<O extends Opcode> {\n  op: O\n  body: GatewayBody[O]\n}\n\nexport type ServerPayload = {\n  [O in Opcode]: GatewayPayloadStructure<O>\n}[Opcode.EVENT | Opcode.PONG | Opcode.READY]\n\nexport type ClientPayload = {\n  [O in Opcode]: GatewayPayloadStructure<O>\n}[Opcode.PING | Opcode.IDENTIFY]\n\nexport interface GatewayBody {\n  [Opcode.EVENT]: Event\n  [Opcode.PING]: {}\n  [Opcode.PONG]: {}\n  [Opcode.IDENTIFY]: {\n    token?: string\n    sequence?: number\n  }\n  [Opcode.READY]: {\n    logins: Login[]\n  }\n}\n\nexport namespace WebSocket {\n  /** The connection is not yet open. */\n  export const CONNECTING = 0\n  /** The connection is open and ready to communicate. */\n  export const OPEN = 1\n  /** The connection is in the process of closing. */\n  export const CLOSING = 2\n  /** The connection is closed. */\n  export const CLOSED = 3\n\n  export type ReadyState =\n    | typeof CONNECTING\n    | typeof OPEN\n    | typeof CLOSING\n    | typeof CLOSED\n\n  export interface EventMap {\n    open: Event\n    error: ErrorEvent\n    message: MessageEvent\n    close: CloseEvent\n  }\n\n  export interface EventListener {\n    (event: Event): void\n  }\n\n  export interface Event {\n    type: string\n    target: WebSocket\n  }\n\n  export interface CloseEvent extends Event {\n    code: number\n    reason: string\n  }\n\n  export interface MessageEvent extends Event {\n    data: string\n  }\n\n  export interface ErrorEvent extends Event {\n    message?: string\n  }\n}\n\nexport interface WebSocket {\n  readonly url?: string\n  readonly protocol?: string\n  readonly readyState?: number\n  close(code?: number, reason?: string): void\n  send(data: string): void\n  dispatchEvent?(event: any): boolean\n  addEventListener<K extends keyof WebSocket.EventMap>(type: K, listener: (event: WebSocket.EventMap[K]) => void): void\n  removeEventListener<K extends keyof WebSocket.EventMap>(type: K, listener: (event: WebSocket.EventMap[K]) => void): void\n}\n", "import install from './components'\nimport { Context } from './context'\n\ndeclare module '@koishijs/plugin-console' {\n  export interface ClientConfig {\n    unsupported?: string[]\n  }\n}\n\nexport * as Satori from '@satorijs/protocol'\nexport * as Universal from '@satorijs/protocol'\nexport * from './plugins/action'\nexport * from './plugins/i18n'\nexport * from './plugins/loader'\nexport * from './plugins/router'\nexport * from './plugins/setting'\nexport * from './plugins/theme'\nexport * from './components'\nexport * from './context'\nexport * from './data'\nexport { Service } from './utils'\nexport { ScopeStatus } from 'cordis'\n\nexport default install\n\nexport interface ActionContext {}\n\nexport interface Config {\n  locale?: string\n}\n\nexport const root = new Context()\n\nroot.app.use(install)\n\nroot.on('activity', data => !data)\n\n/** @deprecated use `useRouter()` */\nexport const router = root.$router.router\n\n/** @deprecated use `useRouter()` */\nexport const activities = root.$router.pages\n"],
  "mappings": "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",
  "names": ["inspect", "isPlainObject", "sanitize", "src_default", "global", "__name", "config", "target", "_a", "value", "args", "thisArg", "arg", "defineProperty", "ScopeStatus", "message", "CordisError", "original", "remove", "inject", "isNullable", "resolved", "hasUpdate", "Inject", "__defProp", "__name", "__commonJS", "__toESM", "_a", "config", "require_browser", "inspect", "_a", "__name", "_a", "__name", "_a", "__name", "Context", "_a", "config", "__name", "Service", "src_default", "Service", "Service", "_a", "Service", "_a", "Service", "Service", "_a", "location", "_a", "Service", "global", "config", "Service", "root", "_a", "Context", "_a", "_a", "src_default", "__name", "Channel", "Type", "Status", "Opcode", "WebSocket", "client_default", "Context"]
}
